!function(e){function t(t){for(var a,s,i=t[0],l=t[1],u=t[2],d=t[3]||[],f=0,h=[];f<i.length;f++)s=i[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(p&&p(t),c.push.apply(c,d);h.length;)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var u=n[l];0!==r[u]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return 0===o.length&&(c.forEach((function(e){if(void 0===r[e]){r[e]=null;var t=document.createElement("link");i.nc&&t.setAttribute("nonce",i.nc),t.rel="prefetch",t.as="script",t.href=s(e),document.head.appendChild(t)}})),c.length=0),e}var a={},r={12:0},o=[],c=[];function s(e){return i.p+""+({8:"input-field.c0e409b3",9:"message-section.253ae210",10:"message-section.70aabc29",11:"message-section.c4cb950c",14:"profile.c50ca41d"}[e]||e)+"."+{8:"251751ef68e604839c4b",9:"f023188bbf70e79ecc01",10:"df2783d626591112d9dd",11:"463abffa1bbc482d5aa3",14:"8f6f49a3b2865aadea0a"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=s(e);var l=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,n[1](l)}r[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://deo.shopeemobile.com/shopee/shopee-seller-live-vn/chateasy/",i.oe=function(e){throw console.error(e),e};var l=window.miniJsonp=window.miniJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u,f=(o.push([0,2,1,0,13,15,4,5,6,7,3,16]),n());t([[],{},0,[2,1,0,4,5,6,7,3,9,11,10,8,14]])}({"+nW5":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),s=n("TSYQ"),i=n.n(s),l=n("ue+V"),u=n.n(l),d=n("MQp2"),p=n("FcmL"),f=n.n(p),h=n("vLVT"),m=n.n(h),v=n("lHcJ"),b=n.n(v),g=n("e2Ol"),y=n.n(g),S=n("vuYD"),C=n.n(S),w={success:f.a,error:m.a,info:y.a,warn:b.a,resolved:f.a},O=function(e){var t=e.type,n=void 0===t?"info":t,a=e.showIcon,o=e.icon,c=e.closeable,s=e.closeText,l=e.onClose,p=e.title,f=e.message,h=e.className;if(!f)return null;var m=a||o,v=i()(u.a["alert-icon-".concat(n)],u.a.alertIcon,u.a.alertIconSize),b=c||s,g=i()(u.a.root,u.a[n],h);return r.a.createElement("div",{className:g},m&&(w[n]?r.a.createElement(d.Icon,{svg:w[n],className:v}):null),r.a.createElement("div",{className:u.a.content},p&&r.a.createElement("div",{className:u.a.title},p),r.a.createElement("div",{className:u.a.message},f)),b&&r.a.createElement("div",{className:u.a.alertClose,onClick:function(e){return l&&l(e)}},s||r.a.createElement(d.Icon,{svg:C.a,className:u.a.closeIcon})))};O.propTypes={type:c.a.oneOf(["success","error","info","warn","resolved","pending"]),showIcon:c.a.bool,icon:c.a.node,closeable:c.a.bool,closeText:c.a.node,onClose:c.a.func,message:c.a.node.isRequired,title:c.a.node,className:c.a.string},t.a=O},"+xQE":function(e,t,n){"use strict";n.r(t),n.d(t,"watchModuleCenterChannel",(function(){return E}));var a=n("lSNA"),r=n.n(a),o=n("yXPU"),c=n.n(o),s=n("o0o1"),i=n.n(s),l=(n("8+KV"),n("Btvt"),n("VRzm"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("jm62"),n("WLL4"),n("HAE/"),n("Ogvq")),u=n("xk4V"),d=n.n(u),p=n("rRWa"),f=n("5rFJ"),h=i.a.mark(k),m=i.a.mark(E);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={},y={},S={},C=new MessageChannel;function w(e){var t=y[e];null!=t&&t.length&&t.forEach((function(t,n){var a=d()();S[a]=t,C.port1.postMessage(a),delete y[e][n]}))}function O(e){return new Promise(function(){var t=c()(i.a.mark((function t(a,r){var o,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.id,c=b(b({},e),{},{resolve:a,reject:r}),y[o]?y[o].push(c):y[o]=[c],!g[o]){t.next=7;break}w(o),t.next=24;break;case 7:if(e.isLazy){t.next=23;break}s=null,t.t0=o,t.next="input-field"===t.t0?12:"message-section"===t.t0?16:20;break;case 12:return t.next=14,Promise.all([n.e(2),n.e(1),n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(3),n.e(8)]).then(n.t.bind(null,"M3gz",7));case 14:return s=t.sent,t.abrupt("break",20);case 16:return t.next=18,Promise.all([n.e(2),n.e(1),n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(3),n.e(9),n.e(11),n.e(10)]).then(n.t.bind(null,"HsjP",7));case 18:return s=t.sent,t.abrupt("break",20);case 20:s&&l.store.addModule(s.getModule()),t.next=24;break;case 23:a(null);case 24:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function R(){return Object(p.eventChannel)((function(e){return C.port2.onmessage=function(t){e(t.data)},function(){return{}}}))}function k(e){var t,n,a,r,o,c,s,l,u;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=S[e],n=t.effect,a=t.action,r=t.id,o=t.payload,c=t.resolve,s=t.reject,l=g[r][a],i.prev=3,i.t0=n,i.next="put"===i.t0?7:"call"===i.t0?11:16;break;case 7:return i.next=9,Object(f.put)(l(o));case 9:return c(),i.abrupt("break",16);case 11:return i.next=13,Object(f.call)(l,o);case 13:return u=i.sent,c(u),i.abrupt("break",16);case 16:i.next=21;break;case 18:i.prev=18,i.t1=i.catch(3),s();case 21:case"end":return i.stop()}}),h,null,[[3,18]])}function E(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.call)(R);case 2:return e=t.sent,t.next=5,Object(f.takeEvery)(e,k);case 5:case"end":return t.stop()}}),m)}t.default={put:function(e){return e.effect="put",O(e)},call:function(e){return e.effect="call",O(e)},handleModuleLoaded:function(e){var t=e.id;g[t]||(g[t]=e.actionsMap),w(t)}}},"/c7q":function(e,t,n){window,e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}({22:function(e,t,n){var a=n(64),r=n(65),o=n(52),c=n(66);e.exports=function(e,t){return a(e)||r(e,t)||o(e,t)||c()},e.exports.default=e.exports,e.exports.__esModule=!0},37:function(e,t,n){"use strict";n.r(t);var a=n(22),r=n.n(a),o={};Object.entries({"input-field":["fetchMessageShortcutsGroupRequested","updateFetchMessageShortcutsGroupStatus","fetchMessageShortcutsGroupSucceeded","setCurrentGroupType","setCurrentGroupId","fetchOffersRequested","fetchOffersSucceed","updateFetchOffersRequestedStatus","getPendingOffersCountRequested","getPendingOffersCountSucceed","replyOfferRequested","fetchAllOrdersRequested","fetchOrdersRequested","fetchOrdersSucceed","updateFetchOrdersStatus","fetchAllOrders","fetchOrders","fetchProductsRequested","fetchMyShopProducts","fetchProductsSucceed","updateMyShopProductsRequestedStatus","updateOtherShopProductsRequestedStatus","updateAllShopProductsRequestedStatus","updateMyShopSearchKeyword","updateOtherShopSearchKeyword","updateSelectedProductTab","fetchAllProductsRequested","fetchAllShopProducts","fetchProducts","initPacks","initStickers","selectSticker","updateCurrentSticker","fetchSingleStickerRequested","fetchSingleStickerSucceeded","updateFetchPacksRequestedStatus","updateFetchStickersRequestedStatus","fetchStickersRequested","fetchStickersRequestedSaga","claimVoucherRequested","fetchVouchersRequested","fetchVouchersSucceeded","updateFetchVouchersRequestedStatus"],"message-section":["deleteConversationMessageHash","deleteMessageRequested","deleteMessagePostRequested","setEntryPoint","evaluationRequested","showMyRateCard","showRateCard","fetchFaqMessagesRequested","fetchFaqMessagesSucceeded","updateFetchFaqMessagesRequestedStatus","updateCurrentFaqId","showFaqHistoryModal","fetchMessagesRequested","fetchMessagesSucceeded","updateFetchMessagesRequestedStatus","updatePreloadedMessages","deletePreloadedMessages","fetchMessagesRequestedWithPreloadSaga","fetchMessagesRequestedSaga","handleSensitiveUrl","sendMessagesFailedByOffline","resetMessagesFailedByOffline","resendOfflineMessagesOnce","resendOfflineMessagesOnceSucceed","updateResendConversationMessage","populateMessageRequested","getPopulateContent","receiveMessageRequested","receiveMessageSucceeded","resetNewConversationQueue","resetOldConversationQueue","resetConversationQueue","handleCurrentConversationChange","setReplyToMessage","resetReplyToMessage","scrollToMessage","setScrollToMessageId","resetScrollToMessageId","setInScrollToMessage","setCurrentConversationReplyToMessage","resetCurrentConversationReplyToMessage","resendMessageRequested","sendMessagesRequested","sendMessagesSucceeded","sendingMessages","sendMessagesToPending","sendMessagesFailed","abortAllSendingMessages","cancelSendingMessageRequested","cancelSendingMessageSucceeded","sendVideoMessageRequested","sendProductsMessageRequested","handleSendSucceededMessages","sendMessages","messageSyncUpdate","messageUpdateTimeNow","translateMessagesRequested","changeTranslateStatus","showTranslateFeedback","sendTranslateFeedback","populateWebviewContent","populateCartReminder","populateRoughMessage","populateMessageWithSourceAndContent","updateVideoInfo","deleteVideoInfo","uploadVideoGetToken","uploadVideGetResult","uploadVideo"]}).forEach((function(e){var t=r()(e,2),n=t[0];t[1].forEach((function(e){o[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.payload,r=t.isLazy;return{id:n,action:e,payload:a,isLazy:r}}}))})),t.default=o},52:function(e,t,n){var a=n(53);e.exports=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},53:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a},e.exports.default=e.exports,e.exports.__esModule=!0},64:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},65:function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],c=!0,s=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(s)throw r}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},66:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}})},0:function(e,t,n){n("87sv"),e.exports=n("2YZa")},1:function(e,t){},"16Al":function(e,t,n){"use strict";var a=n("WbBG");function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,c){if(c!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},"17x9":function(e,t,n){e.exports=n("16Al")()},2:function(e,t){},"2YZa":function(e,t,n){"use strict";n.r(t);n("BKBi"),n("L9s1"),n("Z2Ku");var a=n("XnKn");Object(a.init)("VN","live","6.3.6"),n.p="https://".concat(location.host.includes("cn")?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee/shopee-seller-").concat("live","-").concat("VN".toLowerCase(),"/chateasy/");var r=n("q1tI"),o=n.n(r),c=n("i8i4"),s=n.n(c),i=n("/MKj"),l=n("0cfB"),u=n("Ogvq"),d=n("W2jc"),p=n("tvxL"),f={updateGuideRequested:p.updateGuideRequested,updateChatWindowStatus:p.updateChatWindowStatus},h=Object(i.connect)((function(e){return{newbie:Object(p.newbieSelector)(e),isScChat:Object(p.isScChatSelector)(e),showEntry:Object(p.showEntrySelector)(e),currentUser:Object(p.currentUserSelector)(e)||{},isSubAccount:Object(p.isSubAccountSelector)(e),loginSuccess:Object(p.loginSuccessSelector)(e),socketSuccess:Object(p.socketSuccessSelector)(e),showChatWindow:Object(p.showChatWindowSelector)(e),totalUnreadCount:Object(p.totalUnreadConversationsCountSelector)(e),showConversationDetail:Object(p.showConversationDetailSelector)(e)}}),f)((function(e){return o.a.createElement(d.a,e)})),m=(n("p2bk"),Object(a.getChatSource)()),v=function(e){return{position:"fixed",right:m?"16px":"8px",bottom:m?"".concat((e?64:0)+16,"px"):"0",zIndex:"99999"}},b={create:function(e){var t,n,a=document.getElementById(e);if(m&&(t=(((n=(window.SellerFramework?window.SellerFramework.app:window.dev)||{}).componentData||{}).FixBottomCard||{}).isFixed,n.on&&n.on("FixBottomCardChange",(function(e){var t,n=v(e);for(t in n)a.style[t]=n[t]}))),!a){(a=document.createElement("div")).setAttribute("id",e);var r,c=v(t);for(r in c)a.style[r]=c[r];document.body.appendChild(a)}window.miniChatContainerId=e,function(e,t){s.a.render(o.a.createElement(l.AppContainer,null,o.a.createElement(i.Provider,{store:u.store},o.a.createElement(e,null))),document.getElementById(t))}(h,e)},startOrderChat:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};m&&!a.entryPoint&&(a.entryPoint=7),u.store.dispatch(Object(p.redirectConversationRequested)({userId:t,shopId:e,orderId:n,entryPointType:a.entryPoint}))},startChatWithText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u.store.dispatch(Object(p.redirectConversationRequested)({userId:e,message:t,entryPointType:n.entryPoint}))},startChat:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};u.store.dispatch(Object(p.redirectConversationRequested)({userId:t,shopId:e,productId:n,entryPointType:a.entryPoint}))},minimizeChatWindow:function(){u.store.dispatch(Object(p.updateChatWindowStatus)({shouldShowWindow:!1}))},inNewBie:function(){var e=(u.store.getState().userReducer||{}).newbie,t=void 0===e?[]:e;return Object(a.checkEntryGuide)(t)},updateLoginStatus:function(){u.store.dispatch(Object(p.loginRequested)())},logout:function(){u.store.dispatch(Object(p.forceLogoutRequested)())},locateMessage:function(e,t){e&&t&&(u.store.dispatch(Object(p.updateChatWindowStatus)({shouldShowWindow:!0})),u.store.dispatch(Object(p.locationMessage)({msgId:e,shopId:t})))}};window.ChatEasy=b,"function"==typeof window.chatReady&&window.chatReady(),b.create("shopee-mini-chat-embedded")},"2e4M":function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),c=n.n(o),s=n("PJYZ"),i=n.n(s),l=n("7W2i"),u=n.n(l),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=(n("2Spj"),n("q1tI")),v=n.n(m),b=n("17x9"),g=n.n(b),y=n("6xV8"),S=n.n(y),C=n("iXfV"),w=n.n(C);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var R=function(t){u()(a,t);var n=O(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).state={hasError:!1},t.handleReload=t.handleReload.bind(i()(t)),t}return c()(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"handleReload",value:function(){window.location.reload()}},{key:"render",value:function(){var t=this.props,n=t.children,a=t.shouldShowErrorPic,r=v.a.createElement("div",{className:S.a.error},a&&v.a.createElement("img",{className:S.a.img,src:w.a}),v.a.createElement("div",null,e("common.error.load_failed"),v.a.createElement("span",{className:S.a.loadMore,onClick:this.handleReload},e("common.error.click_retry"))));return this.state.hasError?r:n}}]),a}(v.a.Component);R.propTypes={children:g.a.node,shouldShowErrorPic:g.a.bool},t.a=R}).call(this,n("iMMW").t)},3:function(e,t){},4:function(e,t){},BKBi:function(e,t){performance&&performance.mark&&performance.mark("STATIC_LOADED")},CWZf:function(e,t,n){e.exports=n.p+"6abdc0872a25853b36d17e7498335326.png"},FL2V:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("VLYj"),c=n("/MKj"),s=n("tvxL"),i={updateLocationMode:s.updateLocationMode,operationRequest:s.conversationOperateRequested,showModal:s.showModal,closeModal:s.closeModal};t.a=Object(c.connect)((function(e,t){return{lastMessage:Object(s.conversationLastMessageSelector)(t.conversation.id)(e),inlocation:Object(s.inlocationSelector)(e),autoTranslation:Object(s.autoTranslation)(e),shopTranslationSettings:Object(s.shopTranslationSettingsSelector)(e)}}),i)((function(e){return r.a.createElement(o.a,e)}))},FZfk:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("lwsE"),c=n.n(o),s=n("W8MJ"),i=n.n(s),l=n("PJYZ"),u=n.n(l),d=n("7W2i"),p=n.n(d),f=n("a1gu"),h=n.n(f),m=n("Nsbk"),v=n.n(m),b=(n("2Spj"),n("q1tI")),g=n.n(b),y=n("17x9"),S=n.n(y),C=n("gSTE"),w=n("b7p5"),O=n("XnKn"),R=n("+nW5"),k=n("LI8N"),E=n.n(k);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h()(this,n)}}var j=function(t){p()(a,t);var n=M(a);function a(e){var t;return c()(this,a),(t=n.call(this,e)).handleCloseAlertTip=t.handleCloseAlertTip.bind(u()(t)),t.handleCloseStatusTip=t.handleCloseStatusTip.bind(u()(t)),t.state={shouldShowStatusTip:null},t}return i()(a,[{key:"handleCloseAlertTip",value:function(){try{window.localStorage.setItem("mini-should-show-alert",JSON.stringify(!1))}catch(e){}this.forceUpdate()}},{key:"handleCloseStatusTip",value:function(){var e=this.state.shouldShowStatusTip;this.setState({shouldShowStatusTip:!e})}},{key:"mounted",value:function(){this.props.fetchDegradeConversationsDetail({})}},{key:"render",value:function(){var t=this.state.shouldShowStatusTip,n=this.props,a=n.keyword,o=n.socketFeedback,c=n.networkStatus,s=n.currentUser,i=n.isScChat,l=s.type,u=s.distribution_status,d=!1;try{d=JSON.parse(window.localStorage.getItem("mini-should-show-alert"))}catch(e){d=!1}var p="online"===c,f=l===O.AccountType.SUBACCOUNT&&"hang_up"===u&&!0!==t,h=p?o&&o.network?{type:o.status,message:o.content}:null:{type:"error",message:e("common.network_offline")};return g.a.createElement("div",{className:E.a.root},g.a.createElement(C.a,this.props),h&&g.a.createElement(R.a,{type:h.type,showIcon:!0,message:h.message}),d&&!i&&g.a.createElement(R.a,{type:"warn",showIcon:!0,closeable:!0,message:e("common.alert"),onClose:this.handleCloseAlertTip}),f&&g.a.createElement(R.a,{type:"warn",showIcon:!0,closeable:!0,message:e("common.hangup_tips"),onClose:this.handleCloseStatusTip}),g.a.createElement("div",{className:E.a.conversationLists},g.a.createElement(w.a,r()({isInSearch:!!a},this.props))))}}]),a}(g.a.PureComponent);j.propTypes={isScChat:S.a.bool,keyword:S.a.string,feedback:S.a.object,currentUser:S.a.object,networkStatus:S.a.string,socketFeedback:S.a.object,totalUnreadConversationsCount:S.a.number,fetchDegradeConversationsDetail:S.a.func},t.a=j}).call(this,n("iMMW").t)},Hdln:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("/MKj"),c=n("imT4"),s=n("tvxL"),i={connectSocket:s.connectSocket,updateOpenedMenu:s.updateOpenedMenu,updateUserRequested:s.updateUserRequested,setToastInformation:s.setToastInformation,updateGuideRequested:s.updateGuideRequested,updateCaptchaVisible:s.updateCaptchaVisible,updateCaptchaSignature:s.updateCaptchaSignature,updateChatWindowStatus:s.updateChatWindowStatus,updateConversationDetailStatus:s.updateConversationDetailStatus,changeConversationStatusRequested:s.changeConversationStatusRequested};t.a=Object(o.connect)((function(e){return{newbie:Object(s.newbieSelector)(e),toast:Object(s.toastSelector)(e),isScChat:Object(s.isScChatSelector)(e),openedMenu:Object(s.openedMenuSelector)(e),currentUser:Object(s.currentUserSelector)(e)||{},currentBuyer:Object(s.currentBuyerSelector)(e)||{},isSubAccount:Object(s.isSubAccountSelector)(e),loginSuccess:Object(s.loginSuccessSelector)(e),socketSuccess:Object(s.socketSuccessSelector)(e),totalUnreadCount:Object(s.totalUnreadConversationsCountSelector)(e),currentConversation:Object(s.currentConversationSelector)(e),currentConversationId:Object(s.currentConversationIdSelector)(e),showConversationDetail:Object(s.showConversationDetailSelector)(e),filter:Object(s.filterSelector)(e),captchaVisible:Object(s.captchaVisibleSelector)(e)}}),i)((function(e){return r.a.createElement(c.a,e)}))},KmjB:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n("pIFo");var a=function(e,t){var n=null;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n&&(clearTimeout(n),n=null),n=setTimeout((function(){e.apply(void 0,r)}),t)}},r=function(t){return"string"==typeof t?t:e(t.key,t.vars)}}).call(this,n("iMMW").t)},"NO+q":function(e,t,n){"use strict";(function(e){n("RW0V"),n("ioFf"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("J4zp"),c=n.n(o),s=(n("0l/t"),n("bWfx"),n("q1tI")),i=n.n(s),l=n("17x9"),u=n.n(l),d=n("Y+m0"),p=n.n(d),f=n("TSYQ"),h=n.n(f),m=n("VYkd"),v=n("WxMZ"),b=n("KmjB"),g=n("MQp2"),y=n("Gbhn"),S=n.n(y),C=n("ukHR"),w=n.n(C),O=n("ZHTy"),R=n.n(O),k=n("gE82"),E=n("XnKn");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=[{text:"common.evalute.bad",icon:S.a},{text:"common.evalute.average",icon:w.a},{text:"common.evalute.good",icon:R.a}],x=[{text:"improved",value:E.FeedbackInfo.IMPROVED},{text:"wrong",value:E.FeedbackInfo.WRONG},{text:"offensive",value:E.FeedbackInfo.OFFENSIVE}],I={improved:!1,wrong:!1,offensive:!1},P=function(t){var n=t.title,a=t.closeModal,o=t.actions,l=o.cancel,u=o.confirm,d=t.additions.track;Object(s.useEffect)((function(){d&&d("impressionFeedbackPopup","impression")}),[]);var f=Object(s.useState)(null),y=c()(f,2),S=y[0],C=y[1],w=Object(s.useState)(0),O=c()(w,2),R=O[0],E=O[1],M=Object(s.useState)(""),P=c()(M,2),T=P[0],_=P[1],q=Object(s.useState)(I),L=c()(q,2),F=L[0],W=L[1];Object(s.useEffect)((function(){S&&3!==S&&d&&d("impressionFeedbackMore","impression")}),[S]);var A=Object(b.b)(n),D=function(e){var t=e.target.checked,n=e.target.value,a=x.filter((function(e){return e.value===n}))[0].text;E(t?R+n:R-n),W(j(j({},F),{},r()({},a,t)))};return i.a.createElement("div",{className:p.a.root},i.a.createElement(m.a,{title:A,closeModal:a}),i.a.createElement("div",{className:p.a.content},i.a.createElement("div",{className:p.a.subTitle},i.a.createElement("span",{className:p.a.required},"*"),Object(b.b)({key:"modal.translation_feedback.subTitle"})),i.a.createElement("div",{className:p.a.icons},N.map((function(t,n){return i.a.createElement("div",{key:t.text,className:h()(p.a.option,n+1===S&&p.a.active),onClick:function(){!function(e){S!==e+1&&(E(0),_(""),W(I)),C(e+1)}(n)}},i.a.createElement(g.Icon,{svg:t.icon}),i.a.createElement("div",{className:p.a.optionText},e(t.text)))}))),S&&3!==S&&i.a.createElement("div",{className:p.a.information},i.a.createElement("div",{className:p.a.infoTitle},e("modal.translation_feedback.more")),i.a.createElement("div",{className:p.a.infoOptions},x.map((function(t){return i.a.createElement("div",{key:t.value,className:p.a.info},i.a.createElement(g.Checkbox,{onChange:D,value:t.value,checked:F[t.text]},i.a.createElement("div",{className:p.a.infoText},e("modal.translation_feedback.".concat(t.text)))))}))),i.a.createElement(k.a,{type:"textarea",placeholder:e("modal.translation_feedback.input_placeholder"),autoSize:!0,height:"unset",maxLength:600,showWorldLimit:!1,maxRows:3,minRows:3,value:T,onChange:function(e){_(e)}}))),i.a.createElement(v.a,{size:"default",handleClick:function(e){if("cancel"===e){var t=l.handler;t&&t()}else{var n=u.handler;n&&n({quality:S,feedbacks:R,otherSuggestion:T})}},cancelOption:l,confirmOption:u,disabled:!S}))};P.propTypes={title:u.a.oneOfType([u.a.string,u.a.object]),closeModal:u.a.func,actions:u.a.object,additions:{track:u.a.func}},t.a=P}).call(this,n("iMMW").t)},Nyjy:function(e,t,n){"use strict";(function(e){n("f3/d");var a=n("q1tI"),r=n.n(a),o=n("MQp2"),c=n("TSYQ"),s=n.n(c),i=n("2e4M"),l=n("4Fli"),u=n.n(l);t.a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=function(){switch(n.name){case"profile":return r.a.createElement("div",{className:u.a.profile},r.a.createElement(o.Skeleton,{half:!0}));case"input-field":return r.a.createElement("div",{className:u.a.input},r.a.createElement(o.Skeleton,{half:!0,className:u.a.hint}),r.a.createElement("div",{className:s()(u.a.between,u.a.bottom)},r.a.createElement("div",{className:u.a.inline},r.a.createElement(o.Skeleton,{type:"square",className:u.a.icon}),r.a.createElement(o.Skeleton,{type:"square",className:u.a.icon}),r.a.createElement(o.Skeleton,{type:"square",className:u.a.icon}),r.a.createElement(o.Skeleton,{type:"square",className:u.a.icon}),r.a.createElement(o.Skeleton,{type:"square",className:u.a.icon})),r.a.createElement(o.Skeleton,{type:"square",className:u.a.icon})));default:return r.a.createElement("div",{className:u.a.center},r.a.createElement(o.Loading,{isInit:!0,text:e(n.loadingKey)||""}))}};return function(e){var o=c();return(r.a.createElement(i.a,{shouldShowErrorPic:"message-section"===n.name},r.a.createElement(a.Suspense,{fallback:o},r.a.createElement(t,e))))}}}).call(this,n("iMMW").t)},O8oF:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),c=n.n(o),s=n("SUBy"),i=n("MQp2"),l=n("AlKw"),u=n.n(l),d=n("tvxL"),p=function(e){var t=e.style,n=e.conversation,a=e.keyword,o=e.isSubAccount,c=e.onClick,l=e.shopFilter,p=n.avatar,f=n.avatar_hash,h=n.to_name,m=n.shop_name,v=n.id;return r.a.createElement("div",{style:t,className:u.a.root,onClick:function(){Object(d.clickTracker)({trackerName:"clickSearchNameResult",data:{conversation_id:v}}),c(n)}},r.a.createElement("div",{className:u.a.avatar},r.a.createElement(s.a,{avatar:p,avatarHash:f})),r.a.createElement("div",{className:u.a.wrapper},r.a.createElement("div",{className:u.a.username},r.a.createElement(i.Highlighter,{highlightClassName:u.a.keyword,searchWords:a,textToHighlight:h})),o&&!l&&r.a.createElement("div",{className:u.a.shop},r.a.createElement("div",{className:u.a.text,title:m},m))))};p.propTypes={style:c.a.object,conversation:c.a.object,keyword:c.a.string,shopFilter:c.a.object,isSubAccount:c.a.bool,onClick:c.a.func.isRequired},t.a=p},OTLN:function(e,t,n){"use strict";n("I5cv"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("lwsE"),c=n.n(o),s=n("W8MJ"),i=n.n(s),l=n("7W2i"),u=n.n(l),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=n("q1tI"),v=n.n(m),b=n("17x9"),g=n.n(b),y=n("8Oat"),S=n.n(y),C=n("dRu9"),w=n("MQp2"),O=n("FcmL"),R=n.n(O),k=n("vLVT"),E=n.n(k),M=n("lHcJ"),j=n.n(M),N=n("e2Ol"),x=n.n(N),I=n("i8i4");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var q={transition:"opacity ".concat(200,"ms ease-in-out"),opacity:0},L={success:R.a,fail:E.a,error:E.a,info:x.a,warn:j.a},F={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:1},exited:{opacity:0}},W=function(e){u()(n,e);var t=_(n);function n(e){var a;return c()(this,n),(a=t.call(this,e)).state={show:!1},a.timer=null,a.eventListenerAdded=!1,a}return i()(n,[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toast,a=n.type,r=n.message,o=t.isScChat,c=this.state.show,s="".concat(o?S.a.root:S.a.mall," ").concat(c?S.a.show:""),i="".concat(S.a.icon," ").concat(S.a[a]),l=L[a];return Object(I.createPortal)(v.a.createElement(C.d,{in:c,timeout:200,addEndListener:function(t){e.eventListenerAdded||(t.addEventListener("transitionend",(function(){e.state.show&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){e.setState({show:!1},(function(){e.timer&&clearTimeout(e.timer),e.props.setToastInformation({toast:{type:"",message:"",show:!1}})}))}),1500))}),!1),e.eventListenerAdded=!0)}},(function(e){return v.a.createElement("div",{className:s,style:T(T({},q),F[e])},l&&v.a.createElement(w.Icon,{svg:l,className:i}),v.a.createElement("div",{className:S.a.message},r))})),document.body)}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.toast,n=t.message,a=t.show;return n?a?{show:a}:null:{show:!1}}}]),n}(v.a.PureComponent);W.propTypes={toast:g.a.object,isScChat:g.a.bool,setToastInformation:g.a.func},t.a=W},OW4m:function(e,t,n){"use strict";n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("XnKn");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=null,l=null,u="";window.addEventListener("message",(function(e){e.data.received&&window.clearInterval(l)}),!1),t.a=function(e){var t=e.currentConversation,n=void 0===t?{}:t,a=e.webChatUrl;return Object(o.getItem)("mini-sc_redirect").then((function(e){e&&e.conversationId===n.id||(e={shopId:n.shop_id,userId:n.to_id});var t=s(s({},e),{},{type:"MiniChatRedirect"});i&&!i.closed?(u!==a&&(i.location.href=a),i.focus()):i=window.open("".concat(a),"_blank"),u=a,l&&window.clearInterval(l),l=window.setInterval((function(){try{i.postMessage(t,a)}catch(e){i=null,window.clearInterval(l)}}),1e3)}))}},Ogvq:function(e,t,n){"use strict";n.r(t);var a=n("Nz8i"),r=n("5fBF"),o=n("RIqP"),c=n.n(o),s=(n("bWfx"),n("o0o1")),i=n.n(s),l=n("ANjH"),u=n("5rFJ"),d=n("tvxL"),p=(n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/"),n("lSNA")),f=n.n(p),h=n("J4zp"),m=n.n(h),v=(n("DNiP"),n("/8Fb"),n("L9s1"),n("Z2Ku"),n("FH7K"));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=Object(v.a)({REDUX_RESET:function(){return{}}}).reduxReset,S=i.a.mark(w),C=i.a.mark(O);function w(e){var t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload.resource,n.t0="login"===t,!n.t0){n.next=5;break}return n.next=5,Object(u.put)(Object(d.updateChatEntryStatus)({showEntry:!0}));case 5:return n.next=7,Object(u.put)(Object(d.updateLoginSuccessStatus)({loginSuccess:!1}));case 7:return n.next=9,Object(u.put)(Object(d.forceLogoutRequested)());case 9:case"end":return n.stop()}}),S)}function O(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.takeEvery)(d.handle401ErrorRequested,w);case 2:case"end":return e.stop()}}),C)}var R=n("+xQE"),k=i.a.mark(j),E={blacklist:["modalReducer","userReducer"]},M={modalReducer:d.modalReducer,userReducer:d.userReducer,shopReducer:d.shopReducer,toastReducer:d.toastReducer,draftReducer:d.draftReducer,entityReducer:d.entityReducer,socketReducer:d.socketReducer,settingsReducer:d.settingsReducer,unreadCountReducer:d.unreadCountReducer,conversationReducer:d.conversationReducer,translatePreferenceReducer:d.translatePreferenceReducer,agentConversationReducer:d.agentConversationReducer,reportReducer:d.reportReducer,mediaPreviewerReducer:d.mediaPreviewerReducer,mediaPreviewModalReducer:d.mediaPreviewModalReducer};function j(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.takeEvery)("@@Internal/ModuleManager/ModuleAdded",i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"root"!==(n=t.payload).id&&R.default.handleModuleLoaded(n);case 2:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),k)}var N=i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.all)([j,O].concat(c()(d.watchUserSagas),c()(d.watchShopSagas),c()(d.watchToastSagas),c()(d.watchSocketSagas),c()(d.watchUnreadSagas),c()(d.watchTranslationSagas),c()(d.watchConversationSagas),c()(d.watchReportSagas),[R.watchModuleCenterChannel]).map(u.call));case 2:case"end":return e.stop()}}),e)})),x=n("b4o9"),I=n.n(x),P=n("XnKn"),T=i.a.mark(_);function _(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.put)(Object(d.setChatSource)({isScChat:Object(P.getChatSource)()}));case 3:return t.next=5,Object(u.call)(d.login);case 5:if(e=t.sent,e.user){t.next=11;break}return t.next=10,Object(u.put)(Object(d.updateLoginSuccessStatus)({loginSuccess:!1}));case 10:return t.abrupt("return");case 11:return t.next=13,Object(u.put)(Object(d.updateLoginSuccessStatus)({loginSuccess:!0}));case 13:return t.next=15,Object(u.call)(d.handleLoginSucceeded,e);case 15:return t.next=17,Object(u.put)(Object(d.updateUnreadCount)({type:d.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT,source:P.UnreadSource.PRELOAD}));case 17:return t.next=19,Object(u.spawn)(d.fetchConversationsRequestedSaga,{payload:{direction:"reset"}});case 19:t.next=26;break;case 21:return t.prev=21,t.t0=t.catch(0),console.error("[Load Chat Failed]\n",t.t0),t.next=26,Object(u.put)(Object(d.updateLoginSuccessStatus)({loginSuccess:!1}));case 26:case"end":return t.stop()}}),T,null,[[0,21]])}n.d(t,"store",(function(){return q})),Object(d.initMDAPSdk)(),I.a.init();var q=Object(a.createStore)({advancedCombineReducers:function(e){return Object(l.combineReducers)(function(e,t){return Object.entries(t).reduce((function(t,n){var a=m()(n,2),r=a[0],o=a[1];return g(g({},t),{},f()({},r,(function(t,n){return n.type!=="".concat(y)||e.blacklist.includes(r)||(t=void 0),o(t,n)})))}),{})}(E,e))},enhancers:[],extensions:[Object(r.getSagaExtension)()]},{id:"root",reducerMap:M,sagas:[N,_]})},QyUN:function(e,t,n){e.exports=n.p+"b43d095455136d3f4080437deba43624.png"},"S7/o":function(e,t,n){"use strict";n("I5cv"),n("ioFf"),n("0l/t"),n("mYba"),n("jm62"),n("WLL4"),n("HAE/");var a=n("pVnL"),r=n.n(a),o=n("lSNA"),c=n.n(o),s=n("QILm"),i=n.n(s),l=n("lwsE"),u=n.n(l),d=n("W8MJ"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("7W2i"),v=n.n(m),b=n("a1gu"),g=n.n(b),y=n("Nsbk"),S=n.n(y),C=(n("2Spj"),n("L9s1"),n("Z2Ku"),n("8+KV"),n("RW0V"),n("bWfx"),n("fN96"),n("xfY5"),n("q1tI")),w=n.n(C),O=n("17x9"),R=n.n(O),k=n("dGdO"),E=n.n(k),M=n("MQp2"),j=n("KmjB"),N=n("C5SH"),x=n("s3ZY"),I=n("GqUL"),P=n("Iatj"),T=n("4LQ7"),_=["stopIndex"];function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S()(e);if(t){var r=S()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g()(this,n)}}var W=function(e){v()(n,e);var t=F(n);function n(e){var a;return u()(this,n),(a=t.call(this,e)).listRef=null,a.cellMeasureRefs={},a.scrollTop=0,a.onRowsRendered=null,a.state={loadedRowsMap:{}},a.cache=new P.default({fixedWidth:!0}),a.isRowLoaded=a.isRowLoaded.bind(h()(a)),a.rowRenderer=a.rowRenderer.bind(h()(a)),a.cellRenderer=a.cellRenderer.bind(h()(a)),a.loadMoreRows=a.loadMoreRows.bind(h()(a)),a.handleScroll=a.handleScroll.bind(h()(a)),a.remeasure=Object(j.a)(a.remeasure.bind(h()(a)),500),a.setCellMeasureRef=a.setCellMeasureRef.bind(h()(a)),a.onSectionRendered=a.onSectionRendered.bind(h()(a)),a.handleRowRendered=a.handleRowRendered.bind(h()(a)),a.renderAutoSizerList=a.renderAutoSizerList.bind(h()(a)),a}return p()(n,[{key:"componentDidUpdate",value:function(e){var t=e.extraProps,n=e.listItems,a=this.props,r=a.listItems,o=a.needRemeasure,c=a.extraProps;o&&([r.length+1,r.length-1].includes(n.length)||t.measureFlag!==c.measureFlag)&&this.remeasure()}},{key:"remeasure",value:function(){var e=this;this.cache.clearAll(),this.listRef&&this.listRef.recomputeRowHeights(),this.cellMeasureRefs&&Object.keys(this.cellMeasureRefs).forEach((function(t){e.cellMeasureRefs[t]&&e.cellMeasureRefs[t]._maybeMeasureCell()}))}},{key:"setCellMeasureRef",value:function(e,t){this.cellMeasureRefs[e]=t}},{key:"handleRowRendered",value:function(e){var t=e.stopIndex,n=i()(e,_),a=this.props.handleRowRendered;a&&a(t),this.onRowsRendered&&this.onRowsRendered(L({stopIndex:t},n))}},{key:"onSectionRendered",value:function(e){var t=e.columnStartIndex,n=e.columnStopIndex,a=e.rowStartIndex,r=e.rowStopIndex,o=this.props.columnCount,c=a*o+t,s=r*o+n;this.onRowsRendered({startIndex:c,stopIndex:s})}},{key:"handleScroll",value:function(e){var t=e.scrollTop,n=this.props,a=n.handleComponentScroll,r=n.handleListScroll;r&&r(t),this.scrollTop>t?a("up"):a("down"),this.scrollTop=t}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,a=(e.isScrolling,e.isVisible,e.parent),r=e.style,o=this.props,c=o.listItems,s=o.makeRenderedCell,i=c[n];if(!i)return null;var l="".concat(t,"_").concat(i.id);return(w.a.createElement(I.default,{key:l,parent:a,columnIndex:0,rowIndex:n,cache:this.cache},(function(e){var t=e.measure;return s(i,r,t)})))}},{key:"cellRenderer",value:function(e){var t=this,n=e.columnIndex,a=(e.isScrolling,e.isVisible,e.key,e.parent),r=e.rowIndex,o=e.style,c=this.props,s=c.listItems,i=c.columnCount,l=c.makeRenderedCell,u=s[r*i+n];if(u){var d="".concat(u.id,"_card");return(w.a.createElement(I.default,{key:d,parent:a,cache:this.cache,rowIndex:r,columnIndex:n,ref:function(e){return t.setCellMeasureRef(d,e)}},(function(e){var t=e.measure;return l(u,o,t)})))}}},{key:"loadMoreRows",value:function(e){var t=e.startIndex,n=e.failedStatus,a=void 0===n?"":n,r=this.state.loadedRowsMap;if(!r[t]){var o=this.props,s=o.status;(0,o.loadMoreRowsRequested)({needReset:"failedInit"===a}),s.includes("failed")||this.setState({loadedRowsMap:L(L({},r),{},c()({},t,!0))})}}},{key:"isRowLoaded",value:function(e){var t=e.index;return!!this.props.listItems[t]}},{key:"renderAutoSizerList",value:function(e,t){var n=this,a=this.props,o=a.listItems,c=a.extraProps,s=a.getListRef,i=a.needScrollSpace;this.onRowsRendered=e;var l=o.length||0;return(w.a.createElement(x.default,null,(function(e){var a=e.width,o=e.height;return(w.a.createElement(N.default,r()({ref:function(e){n.listRef=e,s&&s(e),t&&t(e)},width:a,height:o,overscanRowCount:20,rowCount:l,onScroll:n.handleScroll,rowRenderer:n.rowRenderer,rowHeight:n.cache.rowHeight,onRowsRendered:n.handleRowRendered,deferredMeasurementCache:n.cache,onRecomputeGrid:function(){},containerStyle:{},className:"".concat(E.a.list," ").concat(i?E.a.space:"")},c)))})))}},{key:"render",value:function(){var e=this;return(w.a.createElement("div",{className:E.a.root},this.props.isInfinite?w.a.createElement(T.a,{rowCount:9999,isRowLoaded:this.isRowLoaded,loadMoreRows:this.loadMoreRows},(function(t){var n=t.onRowsRendered,a=t.registerChild;return e.renderAutoSizerList(n,a)})):this.renderAutoSizerList()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.loadedRowsMap,a=e.status,r=e.resetRowsMap,o=e.onResetCacheMap;if(r)return o&&o(),{loadedRowsMap:{}};if(a.includes("failed")){var s=Object.keys(n).map((function(e){return parseInt(e)})),i=Math.max.apply(null,s);return i=Number.isInteger(i)?i:0,{loadedRowsMap:L(L({},n),{},c()({},i,!1))}}return null}}]),n}(w.a.PureComponent);W.propTypes={status:R.a.string,isInfinite:R.a.bool,listItems:R.a.array,rowHeight:R.a.number,getListRef:R.a.func,resetRowsMap:R.a.bool,extraProps:R.a.object,columnCount:R.a.number,columnWidth:R.a.number,needRemeasure:R.a.bool,needScrollSpace:R.a.bool,makeRenderedCell:R.a.func,handleListScroll:R.a.func,handleRowRendered:R.a.func,loadMoreRowsRequested:R.a.func,handleComponentScroll:R.a.func,onResetCacheMap:R.a.func},W.defaultProps={status:"",listItems:[],extraProps:{},isInfinite:!0,resetRowsMap:!1,needRemeasure:!1,needScrollSpace:!1},t.a=Object(M.CatchStatus)(W)},SUBy:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),c=n.n(o),s=n("7W2i"),i=n.n(s),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=(n("pIFo"),n("Tze0"),n("q1tI")),h=n.n(f),m=n("17x9"),v=n.n(m),b=n("MQp2"),g=n("KjsW"),y=n.n(g),S=n("CYsx"),C=n.n(S),w=n("kuoV"),O=n.n(w),R=["blue","green","orange","purple","red","yellow"],k=["blue-gray","green-gray","orange-gray","purple-gray","red-gray","yellow-gray"],E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"member",a=e%R.length;return"member"===n?"inactive"===t?k[a]:R[a]:"inactive"===t?"group-gray":"group"};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var j=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,N={shop:y.a,user:C.a},x=function(e){i()(n,e);var t=M(n);function n(){return r()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.shape,a=e.status,r=e.avatar,o=e.avatarHash,c=e.userId,s=e.origin,i=e.username,l=e.avatarRef,u=e.fontSize,d=void 0===u?24:u,p=e.type,f=void 0===p?"member":p,m=null,v=null;return r||(m="cb"===s?"member"===f?"".concat(O.a[E(c,a,f)]," ").concat(O.a["font".concat(d)]):"".concat(O.a[E(c,a,f)]):"","member"!==f||t||(v=(i||"S").trim().replace(j,"#")[0])),h.a.createElement("div",{ref:function(e){l&&l(e)},className:"".concat(O.a.root," ").concat(O.a[n])},r?h.a.createElement("div",{className:O.a.avatarWrapper},h.a.createElement(b.Image,{src:r,hash:o}),h.a.createElement("div",{className:O.a.avatarBorder})):t?h.a.createElement("div",{className:m,style:{width:"100%",height:"100%"}},h.a.createElement("div",{className:O.a["".concat(t,"Icon")]})):"cb"===s?"member"!==f?h.a.createElement("div",{className:m}):h.a.createElement("div",{className:m},v.toUpperCase()):h.a.createElement(b.Icon,{svg:N[s],className:O.a[s]}))}}]),n}(h.a.PureComponent);x.propTypes={avatar:v.a.string,username:v.a.string,userId:v.a.number,avatarRef:v.a.func,status:v.a.string,type:v.a.string,icon:v.a.string,origin:v.a.string,avatarHash:v.a.string,shape:v.a.string,fontSize:v.a.number},x.defaultProps={origin:"user",shape:"square"};t.a=x},VLYj:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),c=n.n(o),s=n("PJYZ"),i=n.n(s),l=n("7W2i"),u=n.n(l),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=(n("2Spj"),n("Z2Ku"),n("91GP"),n("q1tI")),v=n.n(m),b=n("17x9"),g=n.n(b),y=n("SUBy"),S=n("4j81"),C=n("MQp2"),w=n("tvxL"),O=n("XnKn"),R=n("4iwc"),k=n.n(R),E=n("0zYX"),M=n.n(E),j=n("xNaz"),N=n.n(j),x=n("0D0a"),I=n.n(x),P=n("3rmy"),T=n.n(P),_=n("4+Ig"),q=n.n(_),L=n("UZrK"),F=n.n(L),W=n("zMki"),A=n.n(W),D=n("AlKw"),U=n.n(D);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var B={pin:M.a,unpin:M.a,mark_as_read:I.a,mark_as_unread:I.a,delete:q.a,close:T.a,restart:F.a},H={pin:"markAsPinned",unpin:"markAsUnpinned",mark_as_read:"markAsRead",mark_as_unread:"markAsUnread",delete:"markAsDelete",close:"markAsClose",restart:"markAsRestart"},z=function(t){u()(a,t);var n=V(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).state={hover:!1,opened:!1},t.rootNode=null,t.sendClickTracker=t.sendClickTracker.bind(i()(t)),t.handleMouseEvent=t.handleMouseEvent.bind(i()(t)),t.getConversationMenuOptions=t.getConversationMenuOptions.bind(i()(t)),t.handleConversationMenuOpen=t.handleConversationMenuOpen.bind(i()(t)),t.handleConversationMenuClose=t.handleConversationMenuClose.bind(i()(t)),t.getConversationStatus=t.getConversationStatus.bind(i()(t)),t.getOperationItem=t.getOperationItem.bind(i()(t)),t.getCommonOptions=t.getCommonOptions.bind(i()(t)),t.getSubAccountMenuOptions=t.getSubAccountMenuOptions.bind(i()(t)),t.handleClickConversation=t.handleClickConversation.bind(i()(t)),t}return c()(a,[{key:"sendClickTracker",value:function(e){var t=this.props.conversation;Object(w.clickTracker)({trackerName:e,data:{conversation_id:t.id}})}},{key:"handleConversationMenuOpen",value:function(){this.sendClickTracker("clickChatMore");var e=this.props;(0,e.updateOpenedMenu)(e.conversation.id),this.setState({opened:!0})}},{key:"handleConversationMenuClose",value:function(){var e=this.props,t=e.conversation,n=e.openedMenu,a=this.state.hover;t.id!==n&&a&&(a=!1),this.setState({hover:a,opened:!1})}},{key:"getOperationItem",value:function(t,n){var a=this,r=this.props,o=r.operationRequest,c=r.showModal,s=r.closeModal;return v.a.createElement(C.Menu.Item,{className:U.a.operateOption,onClick:function(){"delete"===t?c({type:"CONFIRM_MODAL",title:{key:"conversation_list.conversation_cell.menu.delete_chat_title"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){s()}},confirm:{label:{key:"common.ok"},handler:function(){o({type:t,extra:n}),s()}}},additions:{content:e("conversation_list.conversation_cell.menu.delete_chat_content")}}):o({type:t,extra:n}),a.sendClickTracker(H[t])}},v.a.createElement(C.Icon,{svg:B[t],className:U.a.optionsIcon}),e("common.".concat("delete"===t?"delete_chat":t)))}},{key:"getCommonOptions",value:function(e,t,n,a,r){return[this.getOperationItem(n?"unpin":"pin",{conversationId:t,shopId:e,isPinned:n}),this.getOperationItem(a?"mark_as_read":"mark_as_unread",{conversationId:t,shopId:e,isRead:a,latestMessageId:r}),this.getOperationItem("delete",{conversationId:t,shopId:e})]}},{key:"getSubAccountMenuOptions",value:function(e,t,n){return e?[this.getOperationItem("close",{conversationId:n,shopId:t,status:"closed"})]:[this.getOperationItem("restart",{conversationId:n,shopId:t,status:"activated"})]}},{key:"getConversationMenuOptions",value:function(){var e=this.props,t=e.conversation,n=e.isSubAccount,a=t.status,r=t.pinned,o=t.id,c=t.shop_id,s=t.unread_count,i=void 0===s?0:s,l=t.latest_message_id,u=!!i,d=this.getCommonOptions(c,o,r,u,l);if(n){var p="activated"===a,f=this.getSubAccountMenuOptions(p,c,o).concat(d);return p||f.splice(2,1),f}return d}},{key:"getConversationStatus",value:function(t,n,a){var r=this.props.isSubAccount;return"closed"===t?v.a.createElement("div",{className:U.a.closed},e("common.closed")):["banned"].includes(n)?v.a.createElement("div",{className:U.a.banned},e("common.".concat(n))):!Object(O.isVisitingCNSC)()&&r||!a?null:v.a.createElement("div",{className:U.a.banned},e("common.blocked"))}},{key:"handleMouseEvent",value:function(e){this.setState({hover:e})}},{key:"handleClickConversation",value:function(){var e=this.props,t=e.onClick,n=e.conversation,a=e.updateLocationMode;t(n),a({inlocation:!1})}},{key:"render",value:function(){var t=this,n=this.props,a=n.style,r=n.isScChat,o=n.draftHash,c=(n.openedMenu,n.conversation),s=n.currentConversationId,i=n.lastMessage,l=n.inlocation,u=n.autoTranslation,d=n.shopTranslationSettings,p=n.isSubAccount,f=c.status,h=c.pinned,m=c.id,b=c.to_name,g=c.to_avatar,w=c.to_avatar_hash,R=c.unread_count,E=c.flag,M=c.to_status,j=c.is_blocked,x=c.crm_message_preview,I=void 0===x?{}:x,P=c.entry_point,T=c.to_id,_=c.latest_message_from_id,q=c.shop_id,L=c.auto_translation,F=c.translationAccess,W=T!==_,D=((i||{}).content||{}).translation,V=(D=void 0===D?{}:D).text,B=(d[q]||{}).autoTranslationStatus,H="enabled"===(B||u),z=r?p?B?"enabled"===B:L:H:W?H:H||F&&!!V,K=i.send_status,Y=1===K?"sending":2===K?"failed":"",J=this.state,Q=J.hover,G=J.opened,Z=this.getConversationStatus(f,M,j),X=m===s,$=R>=1e3?"999+":R,ee=this.getConversationMenuOptions(),te=o[m],ne=!X&&te,ae="failed"===Y,re="sending"===Y,oe=i,ce=Object.assign({},oe,{crm_message_preview:I}),se=Object(O.previewMessage)(ce,z),ie=Object(O.isDeletedMessage)(ce),le=oe.created_at||1e3*oe.created_timestamp,ue=Object(O.customizeTime)(le,{noTodayFlag:!0,noTimeFlag:!0}),de=v.a.createElement("div",{className:U.a.username,title:b},b),pe="closed"!==f&&"feed_story"===P;return v.a.createElement("div",{style:a,ref:function(e){return t.rootNode=e},onClick:this.handleClickConversation,className:"".concat(U.a.root," ").concat(X&&!l?U.a.highlighted:""),onMouseEnter:function(){return t.handleMouseEvent(!0)},onMouseLeave:function(){return t.handleMouseEvent(!1)}},h&&v.a.createElement(C.Icon,{svg:k.a,className:U.a.pinned}),v.a.createElement("div",{className:U.a.avatar},v.a.createElement(y.a,{avatar:g,avatarHash:w})),v.a.createElement("div",{className:U.a.container},v.a.createElement("div",{className:U.a.upper},pe?v.a.createElement("div",{className:U.a.usernameFeedContainer},de,v.a.createElement("div",{className:U.a.feed},e("conversation_detail.feed_badge"))):de,Z||R>0&&v.a.createElement("div",{className:U.a[r?"unread":"mallUnread"]},$)),v.a.createElement("div",{className:U.a.lower},v.a.createElement("div",{className:U.a.message},ne?v.a.createElement(v.a.Fragment,null,v.a.createElement("span",{className:U.a.draft},"[",e("label.draft"),"]"),v.a.createElement("span",{title:ne},ne)):v.a.createElement(v.a.Fragment,null,ae?v.a.createElement(C.Icon,{svg:A.a,className:U.a[Y]}):re&&!X?v.a.createElement("span",{className:U.a[Y]}):"move"===E&&v.a.createElement("span",{className:U.a.forward},"[",e("label.forward"),"]"),ie?v.a.createElement(S.DeletedMessageText,{isSend:W}):v.a.createElement("span",{title:se},se))),Q||G?v.a.createElement("div",{onClick:function(e){e.stopPropagation()}},v.a.createElement(C.Dropdown,{strategy:"fixed",overlay:v.a.createElement(C.Menu,null,ee),placement:"bottom-end",onVisibleChange:function(e){e?t.handleConversationMenuOpen():t.handleConversationMenuClose()}},v.a.createElement("div",{id:m,className:U.a.threeDots},v.a.createElement(C.Icon,{svg:N.a,className:"".concat(U.a.threeDotsIcon," ").concat(G?U.a.active:"")})))):v.a.createElement("div",{className:U.a.timestamp},ue))))}}]),a}(v.a.Component);z.propTypes={style:g.a.object,onClick:g.a.func,isScChat:g.a.bool,draftHash:g.a.object,openedMenu:g.a.string,isSubAccount:g.a.bool,conversation:g.a.object,operationRequest:g.a.func,updateOpenedMenu:g.a.func,currentConversationId:g.a.string,lastMessage:g.a.object,showModal:g.a.func,closeModal:g.a.func,inlocation:g.a.bool,updateLocationMode:g.a.func,autoTranslation:g.a.string,shopTranslationSettings:g.a.object},t.a=z}).call(this,n("iMMW").t)},VYkd:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),c=n.n(o),s=n("7W2i"),i=n.n(s),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("q1tI"),h=n.n(f),m=n("17x9"),v=n.n(m),b=n("MQp2"),g=n("p6iB"),y=n.n(g),S=n("IsXm"),C=n.n(S);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var O=function(e){i()(n,e);var t=w(n);function n(){return r()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.closeModal,a=e.noCancel,r="".concat(C.a.root," ").concat(a?"":C.a.hasCancel);return h.a.createElement("div",{className:r},h.a.createElement("div",{className:C.a.title},t),!a&&h.a.createElement(b.Icon,{svg:y.a,className:C.a.cancel,onClick:n}))}}]),n}(h.a.PureComponent);O.propTypes={title:v.a.string,closeModal:v.a.func,noCancel:v.a.bool},t.a=O},W2jc:function(e,t,n){"use strict";(function(e){var a=n("lSNA"),r=n.n(a),o=n("J4zp"),c=n.n(o),s=(n("eM6i"),n("Z2Ku"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/"),n("q1tI")),i=n.n(s),l=n("17x9"),u=n.n(l),d=n("pQ8y"),p=n("MQp2"),f=n("XnKn"),h=n("tvxL"),m=n("XmQJ"),v=n.n(m),b=n("Ji9V"),g=n.n(b),y=n("yTWb"),S=n.n(y),C=n("TelQ"),w=n.n(C),O=n("Hdln"),R=n("OW4m"),k=n("f48l"),E=n.n(k);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(t){var n=t.newbie,a=t.isScChat,r=t.showEntry,o=t.currentUser,l=t.isSubAccount,u=t.loginSuccess,m=t.socketSuccess,b=t.showChatWindow,y=t.totalUnreadCount,C=t.updateGuideRequested,k=t.showConversationDetail,M=t.updateChatWindowStatus,N=Object(s.useState)(!0),x=c()(N,2),I=x[0],P=x[1];Object(s.useEffect)((function(){b&&P(!1)}),[b]),Object(s.useEffect)((function(){if(r){var e=Date.now()-window.__START_MINICHAT__;Object(h.collectComponentTask)(h.ReportComponent.APP,{duration:e,id:h.ReportPoint.SHOW_WEBCHAT})}}),[r]);var T=o.distribution_status,_=o.locale,q=["tw","cn"].includes(Object(f.getServiceLocale)(_)),L=Object(f.checkEntryGuide)(n),F=y>0,W=y>99?"99+":y,A="\n    ".concat(E.a.root,"\n    ").concat(a?E.a.scEntry:"","\n    ").concat(F?E.a.hasUnread:"","\n  "),D=Object(s.useMemo)((function(){var e={enter:E.a.windowEnter,enterActive:E.a.windowEnterActive,exit:E.a.windowExit,exitActive:E.a.windowExitActive};return a||(e.exitActive=E.a.mallWindowExitActive),k||(e=j(j({},e),{},{enter:E.a.halfWindowEnter,enterActive:E.a.halfWindowEnterActive,exitActive:a?E.a.halfWindowExitActive:E.a.halfMallWindowExitActive})),e}),[a,k]);return r?i.a.createElement(i.a.Fragment,null,I&&i.a.createElement("div",{className:A},i.a.createElement("div",{className:E.a.logoWrapper,onClick:function(){u&&m&&Object(h.clickTracker)({trackerName:"clickChatIcon",data:{has_unread_convo:!!y,unread_convo_cnt:y,ctx_url:window.location.href},page:a?"seller_center_chat":"minichat_page"}),M({shouldShowWindow:!0})}},y>0&&i.a.createElement("div",{className:E.a.counts},W),l&&T&&a&&i.a.createElement("div",{className:"".concat(E.a.statusDot," ").concat(E.a[T])}),i.a.createElement(p.Icon,{svg:S.a,className:E.a.chat}),i.a.createElement(p.Icon,{svg:q?w.a:v.a,className:E.a.logo})),a&&i.a.createElement("div",{className:E.a.jumpbar,onClick:function(){Object(h.clickTracker)({trackerName:"clickToWebchatButton"}),Object(R.a)({currentConversation:{},webChatUrl:Object(f.getWebChatUrl)()})}},i.a.createElement(p.Tooltip,{placement:"right",content:e("header.tooltip.see_all")},i.a.createElement(p.Icon,{svg:g.a,className:E.a.jump}))),a&&L&&i.a.createElement("div",{className:E.a.portal},i.a.createElement("div",{className:E.a.guideContent},i.a.createElement("div",{className:E.a.guideItem},i.a.createElement(p.Icon,{svg:S.a,className:"".concat(E.a.guideIcon," ").concat(E.a.chatLogo)}),i.a.createElement("span",{className:E.a.guideTip},e("newbie.tips.chat_icon"))),i.a.createElement("div",{className:E.a.guideItem},i.a.createElement(p.Icon,{svg:g.a,className:"".concat(E.a.guideIcon," ").concat(E.a.jump)}),i.a.createElement("span",{className:E.a.guideTip},e("newbie.tips.open_webchat_icon")))),i.a.createElement("div",{className:E.a.guideBtn,onClick:function(){var e=Object(f.checkEntryGuide)(n);C({newbieId:e.id})}},e("settings.message_shortcuts.import.confirm")))),i.a.createElement(d.a,{unmountOnExit:!0,in:b,timeout:k?300:225,classNames:D,onEnter:null,onExited:function(){return P(!0)}},i.a.createElement(O.a,t))):null};N.propTypes={newbie:u.a.array,isScChat:u.a.bool,showEntry:u.a.bool,currentUser:u.a.object,isSubAccount:u.a.bool,loginSuccess:u.a.bool,socketSuccess:u.a.bool,showChatWindow:u.a.bool,totalUnreadCount:u.a.number,updateGuideRequested:u.a.func,showConversationDetail:u.a.bool,updateChatWindowStatus:u.a.func},t.a=N}).call(this,n("iMMW").t)},WbBG:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},WxMZ:function(e,t,n){"use strict";n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),c=n.n(o),s=n("7W2i"),i=n.n(s),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("q1tI"),h=n.n(f),m=n("17x9"),v=n.n(m),b=n("/o74"),g=n.n(b),y=n("QILm"),S=n.n(y),C=n("PJYZ"),w=n.n(C),O=(n("2Spj"),n("I78e"),n("2WOU")),R=n.n(O),k=["onClick","text","style"];function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var M=function(e){i()(n,e);var t=E(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).getRenderClass=a.getRenderClass.bind(w()(a)),a.uppercaseFirstLetter=a.uppercaseFirstLetter.bind(w()(a)),a}return c()(n,[{key:"uppercaseFirstLetter",value:function(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}},{key:"getRenderClass",value:function(e){var t=e.size,n=e.shape,a=e.theme,r=e.disabled,o=e.rounded,c=e.noHoverChange,s="default"!==t?R.a["size".concat(this.uppercaseFirstLetter(t))]:"",i="default"!==a?R.a["theme".concat(this.uppercaseFirstLetter(a))]:"",l="default"!==n?R.a["shape".concat(this.uppercaseFirstLetter(n))]:"",u=o?R.a.buttonRounded:"",d=r?R.a.disabled:"",p=c?R.a.btn:R.a.shopeeBtn;return"".concat(p," ").concat(s," ").concat(i," ").concat(l," ").concat(u," ").concat(d)}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.text,a=e.style,r=S()(e,k),o=this.getRenderClass(r),c=r.disabled;return h.a.createElement("button",{style:a,disabled:c,className:o,onClick:t},n)}}]),n}(h.a.PureComponent);M.propTypes={text:v.a.string,style:v.a.object,size:v.a.string.isRequired,theme:v.a.string.isRequired,disabled:v.a.bool.isRequired,rounded:v.a.bool.isRequired,onClick:v.a.func.isRequired,shape:v.a.string.isRequired,noHoverChange:v.a.bool.isRequired},M.defaultProps={size:"default",shape:"default",theme:"default",disabled:!1,rounded:!1,noHoverChange:!1,style:{}};var j=M,N=n("KmjB");function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var I=function(e){i()(n,e);var t=x(n);function n(){return r()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.cancelOption,a=e.confirmOption,r=e.handleClick,o=e.disabled,c=n.label,s=n.theme,i=void 0===s?"default":s,l=n.shape,u=void 0===l?"frameless":l,d=a.label,p=a.theme,f=void 0===p?"primary":p,m=a.shape,v=void 0===m?"default":m,b=Object(N.b)(c),y=Object(N.b)(d);return h.a.createElement("div",{className:g.a.root},h.a.createElement(j,{size:t,theme:i,onClick:function(){return r("cancel")},shape:u,text:b}),h.a.createElement(j,{size:t,theme:f,onClick:function(){return r("confirm")},shape:v,text:y,disabled:o}))}}]),n}(h.a.PureComponent);I.propTypes={size:v.a.string,cancelOption:v.a.object,confirmOption:v.a.object,handleClick:v.a.func,disabled:v.a.bool},I.defaultProps={size:"large"};t.a=I},b7p5:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("lwsE"),c=n.n(o),s=n("W8MJ"),i=n.n(s),l=n("PJYZ"),u=n.n(l),d=n("7W2i"),p=n.n(d),f=n("a1gu"),h=n.n(f),m=n("Nsbk"),v=n.n(m),b=(n("2Spj"),n("0l/t"),n("Z2Ku"),n("q1tI")),g=n.n(b),y=n("17x9"),S=n.n(y),C=n("d9A6"),w=n.n(C),O=n("xUYm"),R=n.n(O),k=n("O8oF"),E=n("FL2V"),M=n("MQp2"),j=n("S7/o"),N=n("tvxL"),x=n("AlKw"),I=n.n(x);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h()(this,n)}}var T=["Unread","All","Pinned","Unreplied"],_=["Unread","Unreplied"],q=function(t){p()(a,t);var n=P(a);function a(e){var t;return c()(this,a),(t=n.call(this,e)).state={resetRowsMap:!1},t.listNode=null,t.scrollTop=0,t.needScrollToRow=!1,t.getListRef=t.getListRef.bind(u()(t)),t.onListScroll=t.onListScroll.bind(u()(t)),t.makeRenderedCell=t.makeRenderedCell.bind(u()(t)),t.onRowRendered=t.onRowRendered.bind(u()(t)),t.loadMoreRowsRequested=t.loadMoreRowsRequested.bind(u()(t)),t.handleClickConversation=t.handleClickConversation.bind(u()(t)),t.handleResetCacheMap=t.handleResetCacheMap.bind(u()(t)),t}return i()(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.sortedConversations,n=e.sortedConversations.length,a=t.length;n<a&&(this.stopIndex=this.stopIndex+a-n,this.needScrollToRow=!0);var r=this.props,o=r.filter,c=r.conversationDirection;if(this.needScrollToRow&&_.includes(o)&&"latest"===c){var s=this.stopIndex<0||this.scrollTop<60?0:this.stopIndex;this.listNode&&this.listNode.scrollToRow(s)}this.needScrollToRow=!1}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"onListScroll",value:function(e){this.scrollTop=e}},{key:"onRowRendered",value:function(e){this.needScrollToRow||(this.stopIndex=e)}},{key:"loadMoreRowsRequested",value:function(){(0,this.props.fetchConversationsRequested)({direction:"older"})}},{key:"makeRenderedCell",value:function(e,t){var n=this.props,a=n.keyword,r=n.currentUser,o=n.isSubAccount,c=n.updateOpenedMenu,s=n.currentConversation,i=n.openedMenu,l=n.draftHash,u=n.isInSearch,d=n.isScChat;return u?g.a.createElement(k.a,{currentUser:r,style:t,keyword:a,conversation:e,isSubAccount:o,onClick:this.handleClickConversation}):g.a.createElement(E.a,{style:t,isScChat:d,draftHash:l,openedMenu:i,currentUser:r,conversation:e,isSubAccount:o,updateOpenedMenu:c,onClick:this.handleClickConversation,currentConversationId:s.id})}},{key:"handleClickConversation",value:function(e){var t=this.props,n=t.isInSearch,a=t.currentConversation,r=t.showConversationRequested,o=t.searchConversationsRequested,c=t.updateConversationDetailStatus,s=t.setInScrollToMessage,i=e.id,l=e.unread_count;if(n)return o({}),void r({conversation:e});a?i!==a.id&&(Object(N.clickTracker)({trackerName:"clickChatUser",data:{rebbot:l,conversation_id:i}}),r({conversation:e}),s({inScrollToMessage:!1})):(Object(N.clickTracker)({trackerName:"clickChatUser",data:{rebbot:l,conversation_id:i}}),r({conversation:e}));c({shouldShowConversationDetail:!0})}},{key:"handleResetCacheMap",value:function(){this.setState({resetRowsMap:!1})}},{key:"render",value:function(){var t=this.props,n=t.results,a=t.keyword,o=t.listsHash,c=t.isInSearch,s=t.sortedConversations,i=t.currentConversation,l=t.openedMenu,u=t.conversationHttpStatus,d=t.searchConversationHttpStatus,p={};if(c)p={status:d,isInfinite:!1,listItems:n,extraProps:{keyword:a}};else{var f={openedMenu:l,listsHash:o,currentConversation:i};p={status:u,listItems:s,resetRowsMap:this.state.resetRowsMap,loadMoreRowsRequested:this.loadMoreRowsRequested,extraProps:f}}return 0===p.listItems.length&&"succeed"===p.status?g.a.createElement(M.Empty,{classname:I.a.empty,image:c?w.a:R.a,text:e("conversation_list.no_search_result")}):g.a.createElement(j.a,r()({},p,{needPaddingBottom:!0,getListRef:this.getListRef,handleListScroll:this.onListScroll,makeRenderedCell:this.makeRenderedCell,handleRowRendered:this.onRowRendered,onResetCacheMap:this.handleResetCacheMap}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.resetRowsMap,a=t.filter,r=e.filter,o=null;if(r!==a){o={filter:r};var c=T.includes(a)&&T.includes(r)&&a!==r;n!==c&&(o.resetRowsMap=c)}return o}}]),a}(g.a.PureComponent);q.propTypes={filter:S.a.string,results:S.a.array,keyword:S.a.string,isScChat:S.a.bool,listsHash:S.a.string,draftHash:S.a.object,isInSearch:S.a.bool,openedMenu:S.a.string,currentUser:S.a.object,isSubAccount:S.a.bool,currentUserId:S.a.number,updateOpenedMenu:S.a.func,sortedConversations:S.a.array,currentConversation:S.a.object,conversationDirection:S.a.string,conversationHttpStatus:S.a.string,showConversationRequested:S.a.func,fetchConversationsRequested:S.a.func,searchConversationsRequested:S.a.func,searchConversationHttpStatus:S.a.string,updateConversationDetailStatus:S.a.func,setInScrollToMessage:S.a.func},t.a=q}).call(this,n("iMMW").t)},d9A6:function(e,t,n){e.exports=n.p+"562e3d10ebf525cd541dd028a0acc192.png"},gE82:function(e,t,n){"use strict";var a,r=n("lSNA"),o=n.n(r),c=n("J4zp"),s=n.n(c),i=n("q1tI"),l=n.n(i),u=n("17x9"),d=n.n(u),p=n("wJd0"),f=n.n(p),h=n("TSYQ"),m=n.n(h),v=n("QOMR"),b=n.n(v),g=(n("bWfx"),"\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n"),y=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a||(a=document.createElement("textarea"),document.body.appendChild(a));var r=function(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),a=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),r=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:y.map((function(e){return"".concat(e,":").concat(t.getPropertyValue(e))})).join(";"),paddingSize:a,borderSize:r,boxSizing:n}}(e),o=r.paddingSize,c=r.borderSize,s=r.boxSizing,i=r.contextStyle;a.setAttribute("style","".concat(i,";").concat(g)),a.value=e.value||e.placeholder||"";var l=a.scrollHeight,u={};"border-box"===s?l+=c:"content-box"===s&&(l-=o),a.value="";var d=a.scrollHeight-o;if(null!==t){var p=d*t;"border-box"===s&&(p=p+o+c),l=Math.max(p,l),u.minHeight="".concat(p,"px")}if(null!==n){var f=d*n;"border-box"===s&&(f=f+o+c),l=Math.min(f,l)}return u.height="".concat(l,"px"),a.parentNode&&a.parentNode.removeChild(a),a=null,u}var C=new f.a,w=function(e){var t,n,a=e.maxLength,r=e.placeholder,c=e.disabled,u=e.value,d=e.onPaste,p=e.type,f=e.size,h=e.height,v=e.hasError,g=e.showWorldLimit,y=e.errorContent,w=e.onChange,O=e.onFocus,R=e.onBlur,k=e.top,E=e.bottom,M=e.autoSize,j=e.maxRows,N=e.minRows,x=e.mode,I=Object(i.useState)(!1),P=s()(I,2),T=P[0],_=P[1],q=Object(i.useState)(0),L=s()(q,2),F=L[0],W=L[1],A=Object(i.useRef)(null),D=Object(i.useState)({}),U=s()(D,2),V=U[0],B=U[1],H="textarea"===p&&M,z="shortcutGroupName"===x,K="shortcutContent"===x;Object(i.useEffect)((function(){var e=u&&u.length;"autoReply"===x&&(e=u&&C.countGraphemes(u)),e&&W(e),H&&function(){if(A.current){var e=S(A.current,N,j);B(e)}}()}),[u,H]);var Y=function(e){var t=e.target.value,n=t.length;if("autoReply"===x&&(n=C.countGraphemes(t))>600)return t=C.splitGraphemes(t).splice(0,a).join(""),void(w&&w(t));W(n),w&&w(t)},J=function(e){O&&O(),_(e),!e&&R&&R()},Q=function(){var e,t=m()(b.a.wordLimit,(e={},o()(e,b.a.errorText,F>=a),o()(e,b.a.largeFontSize,z||K),e)),n=m()(b.a.textWordLimit,o()({},b.a.textareaWordLimit,"textarea"===p));return g&&a>0&&l.a.createElement("div",{className:n},l.a.createElement("div",{className:t},F,"/",a))},G="text"===p?l.a.createElement("input",{className:b.a.input,spellCheck:!1,defaultValue:u,placeholder:r,disabled:c,maxLength:a,onChange:Y,onFocus:function(){return J(!0)},onBlur:function(){return J(!1)},onPaste:function(e){d&&d(e)}}):l.a.createElement("textarea",{className:m()(b.a.textarea,o()({},b.a.shortcutContent,K)),spellCheck:!1,value:u,placeholder:r,maxLength:"autoReply"!==x&&a,disabled:c,onChange:Y,onFocus:function(){return J(!0)},onBlur:function(){return J(!1)},onPaste:function(e){d&&d(e)},style:V,ref:A}),Z=m()(b.a.inputWrapper,(t={},o()(t,b.a.focus,T),o()(t,b.a.error,v),o()(t,b.a.normal,"normal"===f),o()(t,b.a.large,"large"===f),o()(t,b.a.textareaWrapper,"textarea"===p),o()(t,b.a.disabled,c),o()(t,b.a.autoSize,H),o()(t,b.a.groupNameInput,z),t)),X={height:h+"px"};return l.a.createElement("div",{className:m()(b.a.outWrapper,(n={},o()(n,b.a.withMarginBottom,z||K),o()(n,b.a.fixedWidth,z),n))},l.a.createElement("div",{className:Z,style:X},k,G,!H&&Q(),E),v&&l.a.createElement("div",{className:b.a.errorContent},y),H&&Q())};w.propTypes={top:d.a.node,bottom:d.a.node,value:d.a.string,size:d.a.string,type:d.a.string,height:d.a.oneOfType([d.a.number,d.a.string]),placeholder:d.a.string,disabled:d.a.bool,maxLength:d.a.number,showWorldLimit:d.a.bool,errorContent:d.a.node,hasError:d.a.bool,autoSize:d.a.bool,minRows:d.a.number,maxRows:d.a.number,onChange:d.a.func,onFocus:d.a.func,onBlur:d.a.func,onPaste:d.a.func,mode:d.a.string},w.defaultProps={size:"normal",height:32,type:"text",disabled:!1,showWorldLimit:!0,hasError:!1,autoSize:!1};t.a=w},gSTE:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),c=n.n(o),s=n("PJYZ"),i=n.n(s),l=n("7W2i"),u=n.n(l),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=(n("2Spj"),n("0l/t"),n("L9s1"),n("Z2Ku"),n("bWfx"),n("OG14"),n("q1tI")),v=n.n(m),b=n("17x9"),g=n.n(b),y=n("tvxL"),S=n("XnKn"),C=n("MQp2"),w=n("4i+F"),O=n.n(w),R=n("+DaP"),k=n.n(R),E=n("bByp"),M=n.n(E);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var N=function(t){u()(a,t);var n=j(a);function a(e){var t;return r()(this,a),(t=n.call(this,e)).state={focus:!1},t.handleFocus=t.handleFocus.bind(i()(t)),t.handleCancelSearch=t.handleCancelSearch.bind(i()(t)),t.handleKeyDown=t.handleKeyDown.bind(i()(t)),t.handleSearch=Object(S.debounce)(t.handleChange.bind(i()(t))),t.handleFilterMenuOpen=t.handleFilterMenuOpen.bind(i()(t)),t}return c()(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.keyword;t===e.keyword||t||(this.input.value="")}},{key:"handleFocus",value:function(e){this.setState({focus:e}),e&&Object(y.clickTracker)({trackerName:"clickSearchName"})}},{key:"handleCancelSearch",value:function(){this.input.value="",this.handleChange()}},{key:"handleChange",value:function(e){this.input&&this.props.searchConversationsRequested({keyword:this.input.value})}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case 27:this.handleCancelSearch(),e.preventDefault()}}},{key:"filter",value:function(e){var t=this.props,n=t.filter,a=t.updateConversationFilter,r=t.resetConversationRequested,o=t.fetchConversationsRequested;if(e!==n){a({filter:e});var c=[e,n];r(),Object(y.clickTracker)({trackerName:"clickFilter".concat(e)});var s=c.includes("Unread"),i=c.includes("Pinned"),l=c.includes("Unreplied");(s||i||l)&&o({direction:"reset"})}}},{key:"getFilterOptions",value:function(t){var n=this,a=t.isSubAccount,r=t.totalUnreadConversationsCount,o=t.isScChat,c=["All","Unread","Pinned"];!a&&o&&c.splice(c.length-1,0,"Unreplied");var s=c.map((function(t){var a=r>0&&"Unread"===t;return(v.a.createElement(C.Menu.Item,{className:M.a.filterOption,onClick:function(){n.filter(t)}},a&&v.a.createElement("span",{className:M.a.reddotIcon}),e("conversation_list.filter.".concat(t.toLowerCase()))))}));return a&&s.push(v.a.createElement(C.Menu.Item,{className:M.a.filterOption,onClick:function(){n.filter("Closed")}},e("common.closed"))),v.a.createElement(C.Menu,null,s)}},{key:"handleFilterMenuOpen",value:function(){var e=this.props.updateOpenedMenu;Object(y.clickTracker)({trackerName:"clickFilter"}),e("conversions_filter")}},{key:"render",value:function(){var t=this,n=this.state.focus,a=this.props,r=a.keyword,o=void 0===r?"":r,c=a.filter,s=(a.openedMenu,a.isSubAccount),i=a.totalUnreadConversationsCount,l=a.isScChat,u=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t="Closed"===n?"common.closed":"conversation_list.filter.".concat(n.toLowerCase()),e(t)}(c),d=this.getFilterOptions({isSubAccount:s,totalUnreadConversationsCount:i,isScChat:l}),p=e("conversation_list.search.placehoder");return v.a.createElement("div",{className:M.a.root},v.a.createElement("div",{className:M.a.search},v.a.createElement("input",{defaultValue:o,className:M.a.input,onChange:this.handleSearch,onKeyDown:this.handleKeyDown,placeholder:p,ref:function(e){return t.input=e},onBlur:function(){return t.handleFocus(!1)},onFocus:function(){return t.handleFocus(!0)}}),v.a.createElement("div",{className:"".concat(M.a.wrapper," ").concat(n||o?M.a.focus:"")},v.a.createElement(C.Icon,{svg:k.a,className:M.a.icon})),o&&v.a.createElement("div",{className:M.a.cancel,onClick:this.handleCancelSearch})),!o&&!n&&v.a.createElement("div",{className:"".concat(M.a.filter," ").concat(M.a.reddotFilter)},i>0&&v.a.createElement("div",{className:M.a.reddot}),v.a.createElement(C.Dropdown,{strategy:"fixed",overlay:d,placement:"bottom-end",onVisibleChange:function(e){e&&t.handleFilterMenuOpen()}},v.a.createElement("div",{className:M.a.selected},u,v.a.createElement(C.Icon,{svg:O.a,className:M.a.arrowDown})))))}}]),a}(v.a.PureComponent);N.propTypes={filter:g.a.string,keyword:g.a.string,openedMenu:g.a.string,isSubAccount:g.a.bool,updateOpenedMenu:g.a.func,updateConversationFilter:g.a.func,resetConversationRequested:g.a.func,fetchConversationsRequested:g.a.func,searchConversationsRequested:g.a.func,isScChat:g.a.bool,totalUnreadConversationsCount:g.a.number},t.a=N}).call(this,n("iMMW").t)},gXTF:function(e,t,n){"use strict";n("I5cv"),n("RW0V"),n("ioFf"),n("0l/t"),n("mYba"),n("8+KV"),n("jm62"),n("WLL4"),n("HAE/");var a=n("lSNA"),r=n.n(a),o=n("lwsE"),c=n.n(o),s=n("W8MJ"),i=n.n(s),l=n("7W2i"),u=n.n(l),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=n("q1tI"),v=n.n(m),b=n("/MKj"),g=n("tvxL"),y=n("QILm"),S=n.n(y),C=n("17x9"),w=n.n(C),O=n("V5eP"),R=n.n(O),k=n("9rZX"),E=n.n(k),M=n("KmjB"),j=n("MQp2"),N=n("XnKn"),x=n("p6iB"),I=n.n(x),P=n("X+/D"),T=n.n(P);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var q=function(e){u()(n,e);var t=_(n);function n(){return c()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.closeModal,a=e.additions,r=a.modalStyle,o=a.withCloseIcon,c=void 0!==o&&o,s=a.content,i=a.contentStyle,l=a.renderContentAsHtml,u=e.actions,d=u.confirm,p=u.cancel,f=t&&Object(M.b)(t),h=s&&Object(M.b)(s),m="".concat(T.a.content," ").concat(f?"":T.a.noTitle);return v.a.createElement("div",{className:T.a.root,style:r,onClick:function(e){return e.stopPropagation()}},v.a.createElement("div",{className:T.a.titleWrap},f&&v.a.createElement("div",{className:T.a.title},f),c&&v.a.createElement(j.Icon,{svg:I.a,className:T.a.close,onClick:p&&p.handler||n})),h&&(l?v.a.createElement("div",{className:m,style:i,dangerouslySetInnerHTML:{__html:h}}):v.a.createElement("div",{className:m,style:i},h)),v.a.createElement("div",{className:T.a.actions},!Object(N.checkEmptyObject)(p)&&v.a.createElement("div",{className:T.a.cancel,onClick:p.handler},Object(M.b)(p.label)),!Object(N.checkEmptyObject)(d)&&v.a.createElement("div",{className:T.a.confirm,onClick:d.handler||n},Object(M.b)(d.label))))}}]),n}(v.a.PureComponent);q.propTypes={title:w.a.oneOfType([w.a.string,w.a.object]),additions:w.a.object,closeModal:w.a.func,actions:w.a.shape({confirm:w.a.oneOfType([w.a.string,w.a.object]),cancel:w.a.oneOfType([w.a.string,w.a.object])})};var L=q,F=n("PJYZ"),W=n.n(F),A=(n("2Spj"),n("t+QN")),D=n.n(A),U=n("VYkd"),V=n("WxMZ");function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var H=function(e){u()(n,e);var t=B(n);function n(e){var a;return c()(this,n),(a=t.call(this,e)).onClick=a.onClick.bind(W()(a)),a.getContentRef=a.getContentRef.bind(W()(a)),a.handleClickNotices=a.handleClickNotices.bind(W()(a)),a}return i()(n,[{key:"onClick",value:function(e){var t=this.props.actions,n=t.cancel,a=t.confirm;if("cancel"===e){var r=n.handler;r&&r()}else{var o=a.handler;o&&o()}}},{key:"getContentRef",value:function(e){e&&(this.contentRef=e)}},{key:"componentDidMount",value:function(){if(this.contentRef){var e=this.contentRef.firstElementChild;e&&(e.className=D.a.policy,e.addEventListener("click",this.handleClickNotices))}}},{key:"componentWillUnmount",value:function(){if(this.contentRef){var e=this.contentRef.firstElementChild;e&&(e.className=D.a.policy,e.removeEventListener("click",this.handleClickNotices))}}},{key:"handleClickNotices",value:function(){var e=this.props.additions.region;window.open("".concat(N.cancelOrderPolicy[e]||N.cancelOrderPolicy.sg))}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.additions.content,a=e.closeModal,r=e.actions,o=r.cancel,c=r.confirm,s=Object(M.b)(t),i=Object(M.b)(n);return v.a.createElement("div",{className:D.a.root},v.a.createElement(U.a,{title:s,closeModal:a,noCancel:!0}),v.a.createElement("div",{className:D.a.content,ref:this.getContentRef,dangerouslySetInnerHTML:{__html:i}}),v.a.createElement(V.a,{size:"custome",cancelOption:o,confirmOption:c,handleClick:this.onClick}))}}]),n}(v.a.PureComponent);H.propTypes={title:w.a.oneOfType([w.a.string,w.a.object]),additions:w.a.object,closeModal:w.a.func,actions:w.a.object};var z=H,K=n("NO+q"),Y=["type"],J=["show","closeable"];function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var G=function(e){u()(n,e);var t=Q(n);function n(){return c()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=S()(e,Y);switch(t){case"CONFIRM_MODAL":return v.a.createElement(L,n);case"Cancel_ORDER_WARNING_MODAL":return v.a.createElement(z,n);case"EVALUTE_MODAL":return v.a.createElement(K.a,n);default:return null}}}]),n}(v.a.PureComponent);G.propTypes={type:w.a.string.isRequired};var Z=function(e){u()(n,e);var t=Q(n);function n(){return c()(this,n),t.apply(this,arguments)}return i()(n,[{key:"componentDidMount",value:function(){var e=window.miniChatContainerId;E.a.setAppElement("#".concat(e))}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.closeable,a=S()(e,J),r=window.miniChatContainerId;return v.a.createElement(E.a,{isOpen:t,onRequestClose:n?a.closeModal:void 0,parentSelector:function(){return document.querySelector("#".concat(r))},overlayClassName:R.a.overlay,className:R.a.content,shouldReturnFocusAfterClose:!1},v.a.createElement(G,a))}}]),n}(v.a.PureComponent);Z.propTypes={show:w.a.bool,closeable:w.a.bool};var X=Z;function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var te=function(e){u()(n,e);var t=ee(n);function n(){return c()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){return v.a.createElement(X,this.props)}}]),n}(v.a.PureComponent),ne={closeModal:g.closeModal};t.a=Object(b.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.modalReducer)}),ne)(te)},iMMW:function(e,t,n){"use strict";n.r(t),n.d(t,"t",(function(){return r}));n("2Spj");var a=n("XzT5"),r=a.default.t.bind(a.default)},iXfV:function(e,t,n){e.exports=n.p+"91095bcead05511cb1282ef16d60c2bf.png"},imT4:function(e,t,n){"use strict";(function(e){var a=n("J4zp"),r=n.n(a),o=(n("0l/t"),n("bWfx"),n("Z2Ku"),n("q1tI")),c=n.n(o),s=n("17x9"),i=n.n(s),l=n("tvxL"),u=n("MQp2"),d=n("XnKn"),p=n("OW4m"),f=n("gXTF"),h=n("OTLN"),m=n("oh+t"),v=n("l4Er"),b=n("PWQ0"),g=n.n(b),y=n("XmQJ"),S=n.n(y),C=n("4Ntn"),w=n.n(C),O=n("YnXV"),R=n.n(O),k=n("vd8H"),E=n.n(k),M=n("aCn2"),j=n.n(M),N=n("TelQ"),x=n.n(N),I=n("5deg"),P=n.n(I),T=n("DIuY"),_=n.n(T),q=n("RK9Y"),L=n.n(q),F=n("CWZf"),W=n.n(F),A=n("iXfV"),D=n.n(A),U=n("QyUN"),V=n.n(U),B=n("FK2i"),H=n.n(B),z={seeAll:L.a,minimize:g.a,hideDialog:_.a,showDialog:P.a},K=function(t){var n=t.newbie,a=t.isScChat,s=t.openedMenu,i=t.currentUser,b=t.isSubAccount,g=t.currentBuyer,y=t.loginSuccess,C=t.socketSuccess,O=t.totalUnreadCount,k=t.showConversationDetail,M=t.currentConversation,N=t.updateGuideRequested,I=t.updateUserRequested,P=t.updateOpenedMenu,T=t.setToastInformation,q=t.toast,L=t.connectSocket,F=t.updateChatWindowStatus,A=t.changeConversationStatusRequested,U=t.updateConversationDetailStatus,B=t.filter,K=t.captchaVisible,Y=t.updateCaptchaVisible,J=t.updateCaptchaSignature,Q=Object(o.useState)(!1),G=r()(Q,2),Z=G[0],X=G[1],$=Object(o.useState)(!1),ee=r()($,2),te=ee[0],ne=ee[1],ae=Object(o.useCallback)((function(){return Y({visible:!1})}),[Y]),re=function(e){J({signature:e}),ae()};Object(o.useEffect)((function(){Object(l.viewTracker)({trackerName:"viewPage",data:{tab_name:B.toLowerCase()}})}),[B]);var oe,ce,se={key:"seeAll",tip:"header.tooltip.see_all",customProps:{position:"right",edgeDistance:12},icon:"seeAll",handler:function(e){Object(l.clickTracker)({trackerName:"clickToWebchatButton"}),Object(p.a)({currentConversation:M,webChatUrl:Object(d.getWebChatUrl)()})}},ie={key:"minimize",tip:"header.tooltip.minimize",icon:"minimize",handler:function(e){F({shouldShowWindow:!1}),Object(l.clickTracker)({trackerName:"clickCloseButton"})}},le=i.distribution_status,ue=i.locale,de=["tw","cn"].includes(Object(d.getServiceLocale)(ue)),pe="working"===le,fe=function(t){var n=c.a.createElement("div",{className:H.a.statusOption},c.a.createElement("div",{className:H.a.selected},t&&c.a.createElement(u.Icon,{svg:w.a,className:H.a.currentStatus})),c.a.createElement("div",{className:"".concat(H.a.status," ").concat(H.a.working)}),c.a.createElement("div",{className:t?H.a.active:""},e("common.online"))),a=c.a.createElement("div",{className:H.a.statusOption},c.a.createElement("div",{className:H.a.selected},!t&&c.a.createElement(u.Icon,{svg:w.a,className:H.a.currentStatus})),c.a.createElement("div",{className:"".concat(H.a.status," ").concat(H.a.hangup)}),c.a.createElement("div",{className:t?"":H.a.active},e("common.offline")));return c.a.createElement(u.Menu,null,c.a.createElement(u.Menu.Item,{onClick:function(){!t&&I({status:"working"}),!t&&Object(l.clickTracker)({trackerName:"clickStatusOnlineButton"})}},n),c.a.createElement(u.Menu.Item,{onClick:function(){t&&I({status:"hang_up"}),t&&Object(l.clickTracker)({trackerName:"clickStatusHangup"})}},a))}(pe),he=Object(d.checkHeaderGuide)(n),me="".concat(H.a.userStatus," ").concat(H.a.hoverStyle," ").concat(pe?H.a.working:H.a.hangup);return c.a.createElement("div",{style:a?{borderRadius:"4px"}:{},className:k?H.a.container:H.a.halfContainer},c.a.createElement("div",{className:H.a.header},c.a.createElement("div",{className:H.a.logoWrapper},b&&a&&c.a.createElement("div",{className:H.a.customMenu},c.a.createElement(u.Dropdown,{strategy:"fixed",overlay:fe,placement:"bottom-start",onVisibleChange:function(e){e?(Object(l.clickTracker)({trackerName:"clickShopHeadStatus"}),P("user_status"),ne(!0)):ne(!1)}},c.a.createElement(u.Tooltip,{content:e("common.".concat(pe?"online":"offline"))},c.a.createElement("div",{className:me,onMouseEnter:function(){return X(!0)},onMouseLeave:function(){return X(!1)}},(te||Z)&&c.a.createElement(u.Icon,{svg:R.a,className:H.a.arrow}))))),c.a.createElement(u.Icon,{svg:de?x.a:S.a,className:H.a.logo}),!!O&&c.a.createElement("div",{className:H.a.unread},c.a.createElement(u.Icon,{svg:E.a,className:H.a.unreadOpen}),O,c.a.createElement(u.Icon,{svg:j.a,className:H.a.unreadClose}))),(ce=[],k?ce.push({key:"hideDialog",tip:"header.tooltip.close_dialog",icon:"hideDialog",handler:function(e){U({shouldShowConversationDetail:!1}),Object(l.clickTracker)({trackerName:"clickFoldButton"})}}):ce.push({key:"showDialog",tip:"header.tooltip.open_dialog",icon:"showDialog",handler:function(e){U({shouldShowConversationDetail:!0,needMark:!0}),Object(l.clickTracker)({trackerName:"clickUnFoldButton"})}}),ce.push(ie),a&&ce.push(se),c.a.createElement("div",{className:H.a.operatorWrapper},ce.map((function(t){return c.a.createElement("div",{key:t.key,className:H.a.operatorItemWrapper},c.a.createElement(u.Tooltip,{content:e(t.tip)},c.a.createElement(u.Icon,{svg:z[t.icon],className:H.a[t.icon],onClick:t.handler})))}))))),c.a.createElement("div",{className:H.a.windows},(oe={isScChat:a,openedMenu:s,currentUser:i,isSubAccount:b,currentBuyer:g,loginSuccess:y,socketSuccess:C,updateOpenedMenu:P,setToastInformation:T,currentConversation:M,showConversationDetail:k,changeConversationStatusRequested:A,currentUserId:(i||{}).id},y?C?c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{toast:q,isScChat:a,setToastInformation:T}),c.a.createElement("div",{className:H.a.details},M.id?c.a.createElement(m.a,oe):c.a.createElement("div",{className:H.a.blank},c.a.createElement("div",{className:H.a.plate},c.a.createElement("img",{src:W.a,className:H.a.image})),c.a.createElement("div",{className:H.a.title},e("blank_page.".concat(a?"":"mall_","title"))),a&&c.a.createElement("div",{className:H.a.subtitle},e("blank_page.tip")))),c.a.createElement(v.a,oe),c.a.createElement(f.a,null),c.a.createElement(u.Captcha,{isLiveEnv:!0,shouldShow:K,onDismiss:ae,onVerifySuccess:re})):c.a.createElement("div",{className:H.a.maxBlank},c.a.createElement("img",{src:D.a,className:H.a.errorImage}),c.a.createElement("div",{className:H.a.title},e("socket_error.title")),c.a.createElement("div",{className:H.a.reload,onClick:L},e("common.error.reload"))):c.a.createElement("div",{className:H.a.maxBlank},c.a.createElement("img",{src:V.a,className:H.a.errorImage}),c.a.createElement("div",{className:H.a.title},e("common.error.hint_text")),c.a.createElement("div",{className:H.a.subtitle},e("login_error.tips"))))),a&&he&&c.a.createElement("div",{className:H.a.portal},c.a.createElement("div",{className:H.a.guideContent},c.a.createElement("div",{className:H.a.guideItem},c.a.createElement(u.Icon,{svg:_.a,className:"".concat(H.a.guideIcon," ").concat(H.a.hideDialog)}),c.a.createElement("span",{className:H.a.guideTip},e("newbie.tips.hide_conversation")))),c.a.createElement("div",{className:H.a.guideBtn,onClick:function(){var e=Object(d.checkHeaderGuide)(n);N({newbieId:e.id})}},e("settings.message_shortcuts.import.confirm"))))};K.propTypes={newbie:i.a.array,toast:i.a.object,isScChat:i.a.bool,openedMenu:i.a.string,currentUser:i.a.object,isSubAccount:i.a.bool,loginSuccess:i.a.bool,currentBuyer:i.a.object,socketSuccess:i.a.bool,connectSocket:i.a.func,updateChatParams:i.a.func,updateOpenedMenu:i.a.func,totalUnreadCount:i.a.number,updateUserRequested:i.a.func,setToastInformation:i.a.func,currentConversation:i.a.object,updateGuideRequested:i.a.func,updateChatWindowStatus:i.a.func,showConversationDetail:i.a.bool,resetConversationRequested:i.a.func,updateConversationDetailStatus:i.a.func,changeConversationStatusRequested:i.a.func,filter:i.a.string,captchaVisible:i.a.bool,updateCaptchaVisible:i.a.func,updateCaptchaSignature:i.a.func},t.a=K}).call(this,n("iMMW").t)},l4Er:function(e,t,n){"use strict";(function(e){n("I5cv");var a=n("pVnL"),r=n.n(a),o=n("lwsE"),c=n.n(o),s=n("W8MJ"),i=n.n(s),l=n("PJYZ"),u=n.n(l),d=n("7W2i"),p=n.n(d),f=n("a1gu"),h=n.n(f),m=n("Nsbk"),v=n.n(m),b=(n("2Spj"),n("q1tI")),g=n.n(b),y=n("/MKj"),S=n("LI8N"),C=n.n(S),w=n("17x9"),O=n.n(w),R=n("tvxL"),k=n("XnKn"),E=n("FZfk"),M=n("+xQE"),j=n("/c7q"),N=n.n(j),x=n("iXfV"),I=n.n(x);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h()(this,n)}}var T=function(e){return M.default.put(N.a.setInScrollToMessage({payload:e}))},_=function(t){p()(a,t);var n=P(a);function a(e){var t;return c()(this,a),(t=n.call(this,e)).errorRef=g.a.createRef(),t.handleRedirection=t.handleRedirection.bind(u()(t)),t}return i()(a,[{key:"handleRedirection",value:function(){window.open(Object(k.getWebChatUrl)())}},{key:"componentDidMount",value:function(){if(this.errorRef&&this.errorRef.current){var e=this.errorRef.current.firstElementChild;e&&e.addEventListener("click",this.handleRedirection)}}},{key:"componentWillUnmount",value:function(){if(this.errorRef&&this.errorRef.current){var e=this.errorRef.current.firstElementChild;e&&e.removeEventListener("click",this.handleRedirection)}}},{key:"render",value:function(){return this.props.conversationHttpStatus===k.DataFetchStatus.TEMPORY_ERROR?g.a.createElement("div",{className:C.a.error},g.a.createElement("img",{className:C.a.img,src:I.a}),g.a.createElement("div",{className:C.a.tips},e("common.tempory_error.tip1")),g.a.createElement("div",{ref:this.errorRef,className:C.a.tips,dangerouslySetInnerHTML:{__html:e("common.tempory_error.tip2")}})):g.a.createElement(E.a,r()({},this.props,{setInScrollToMessage:T}))}}]),a}(g.a.PureComponent),q={markMessagesRequested:R.markMessagesRequested,updateConversationFilter:R.updateConversationFilter,showConversationRequested:R.showConversationRequested,resetConversationRequested:R.resetConversationRequested,deleteConversationRequested:R.deleteConversationRequested,fetchConversationsRequested:R.fetchConversationsRequested,searchConversationsRequested:R.searchConversationsRequested,redirectConversationRequested:R.redirectConversationRequested,updateConversationDetailStatus:R.updateConversationDetailStatus,fetchDegradeConversationsDetail:R.fetchDegradeConversationsDetail};_.propTypes={conversationHttpStatus:O.a.string},t.a=Object(y.connect)((function(e){return{filter:Object(R.filterSelector)(e),keyword:Object(R.keywordSelector)(e),results:Object(R.resultsSelector)(e),listsHash:Object(R.listsHashSelector)(e),draftHash:Object(R.draftHashSelector)(e),socketFeedback:Object(R.feedbackSelector)(e),networkStatus:Object(R.networkStatusSelector)(e),totalUnreadConversationsCount:Object(R.totalUnreadConversationsCountSelector)(e),sortedConversations:Object(R.sortedConversationsSelector)(e),conversationDirection:Object(R.conversationDirectionSelector)(e),conversationHttpStatus:Object(R.conversationHttpStatusSelector)(e),searchConversationHttpStatus:Object(R.searchConversationHttpStatusSelector)(e)}}),q)(_)}).call(this,n("iMMW").t)},"oh+t":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("/MKj"),c=n("tvxL"),s=n("J4zp"),i=n.n(s),l=n("17x9"),u=n.n(l),d=n("Nyjy"),p=n("4j81"),f=n("JAFX"),h=n.n(f),m=Object(a.lazy)((function(){return Promise.all([n.e(2),n.e(1),n.e(0),n.e(14)]).then(n.t.bind(null,"fNpe",7))})),v=Object(d.a)(m,{name:"profile"}),b=Object(a.lazy)((function(){return Promise.all([n.e(2),n.e(1),n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(3),n.e(8)]).then(n.t.bind(null,"M3gz",7))})),g=Object(d.a)(b,{name:"input-field"}),y=Object(a.lazy)((function(){return Promise.all([n.e(2),n.e(1),n.e(0),n.e(4),n.e(5),n.e(6),n.e(7),n.e(3),n.e(9),n.e(11),n.e(10)]).then(n.t.bind(null,"HsjP",7))})),S=Object(d.a)(y,{name:"message-section",loadingKey:"common.loading"}),C=function(e){var t=Object(a.useState)(!1),n=i()(t,2),o=n[0],s=n[1],l=e.shop,u=e.isScChat,d=e.currentUser,f=e.currentBuyer,m=e.isSubAccount,b=e.currentConversation,y=e.changeConversationStatusRequested,C=e.showModal,w=e.closeModal,O=e.blockUserRequested,R=e.addMediaFile,k=e.drawerMedias,E=e.clearMediaFile,M=e.deleteMediaFile,j=e.hasVideoPermission,N=e.setToastInformation,x=e.previewMedias,I=e.showMediaPreviewModal,P=e.currentPreviewMediaId,T=e.closeMediaPreviewModalRequested,_=function(e){e.preventDefault(),o&&s(!1)},q=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=b.id,a=b.shop_id;R({medias:e,conversationId:n}),t&&Object(c.actionDragVideoTracker)({trackerName:"actionDragVideoInMediaPreivew",data:{conversation_id:n},shopId:a})},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fail";N({toast:{show:!0,type:t,message:e}})};return r.a.createElement(r.a.Fragment,null,I&&r.a.createElement(p.MediaPreviewModal,{medias:x,modalZIndex:999999,clickTracker:c.clickTracker,impressionTracker:c.impressionTracker,actionFinishVideoTracker:c.actionFinishVideoTracker,onVisibleChange:function(e){return!e&&T()},currentPreviewMediaId:P}),r.a.createElement("div",{className:h.a.header},r.a.createElement(v,{shop:l,currentUser:d,currentBuyer:f,isSubAccount:m,currentConversation:b,showModal:C,closeModal:w,blockUserRequested:O,isScChat:u})),r.a.createElement("div",{className:h.a.zone,onDragEnter:function(e){e.preventDefault(),!o&&s(!0)}},o&&r.a.createElement(p.MediaDropper,{onSuccess:q,onDragOver:function(e){return e.preventDefault()},onDragLeave:_,onDrop:_,receiverName:b.to_name,hasVideoPermission:j,currentMediaNum:k.length,onError:L}),r.a.createElement("div",{id:"messagesContainer",className:h.a.message},k.length>0&&r.a.createElement("div",{className:h.a.mediaPreviewerWrap},r.a.createElement(p.MediaPreviewer,{medias:k,onClear:function(){var e=b.id,t=b.shop_id;E({conversationId:e}),Object(c.closePreviewMediaTracker)({trackerName:"closePreviewMediaInMediaPreivew",data:{conversation_id:e},shopId:t})},onDelete:function(e){var t=b.id,n=b.shop_id;M({id:e,conversationId:t}),Object(c.deletePreviewMediaTracker)({trackerName:"deletePreviewMediaInMediaPreivew",data:{conversation_id:t},shopId:n})},onAddSuccess:q,onError:L,hasVideoPermission:j,clickTracker:c.clickTracker,impressionTracker:c.impressionTracker})),r.a.createElement(S,{currentUser:d,currentConversation:b})),r.a.createElement("div",{className:h.a.input},r.a.createElement(g,{shop:l,isScChat:u,currentUser:d,currentBuyer:f,isSubAccount:m,addMediaFile:R,drawerMedias:k,clearMediaFile:E,hasVideoPermission:j,currentConversation:b,handleErrorWithToast:L,changeConversationStatusRequested:y}))))};C.propTypes={shop:u.a.object,isScChat:u.a.bool,isSubAccount:u.a.bool,currentUser:u.a.object,currentBuyer:u.a.object,currentConversation:u.a.object,setToastInformation:u.a.func.isRequired,changeConversationStatusRequested:u.a.func,showModal:u.a.func,closeModal:u.a.func,blockUserRequested:u.a.func,addMediaFile:u.a.func.isRequired,deleteMediaFile:u.a.func.isRequired,clearMediaFile:u.a.func.isRequired,drawerMedias:u.a.array,hasVideoPermission:u.a.bool,previewMedias:u.a.array,showMediaPreviewModal:u.a.bool,currentPreviewMediaId:u.a.string,closeMediaPreviewModalRequested:u.a.func};var w=C,O={showModal:c.showModal,closeModal:c.closeModal,addMediaFile:c.addMediaFile,deleteMediaFile:c.deleteMediaFile,clearMediaFile:c.clearMediaFile,blockUserRequested:c.blockUserRequested,closeMediaPreviewModalRequested:c.closeMediaPreviewModalRequested};t.a=Object(o.connect)((function(e){return{drawerMedias:Object(c.mediaListSelector)(e),hasVideoPermission:Object(c.hasVideoPermissionSelector)(e),shop:Object(c.currentConversationShopSelectors)(e),previewMedias:Object(c.previewMediasSelector)(e),showMediaPreviewModal:Object(c.showMediaPreviewModalSelector)(e),currentPreviewMediaId:Object(c.currentPreviewMediaIdSelector)(e)}}),O)(w)},xUYm:function(e,t,n){e.exports=n.p+"143e062750363ec2d5f8d5601a9b595a.png"}});
//# sourceMappingURL=app.748942c6.d5e2a56d1553719fa52e.js.map